<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Isabel PALACIO">
<meta name="dcterms.date" content="2024-04-01">

<title>Techniques de prévision et conjoncture – Menu principal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../../../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="../../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="../../../site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="../../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="../../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="../../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Menu principal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">À propos</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/isabel6198"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/isabel-palacio-9470a291/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text">LinkedIn</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#résumé" id="toc-résumé" class="nav-link active" data-scroll-target="#résumé">Résumé</a></li>
  <li><a href="#analyse-exploratoire" id="toc-analyse-exploratoire" class="nav-link" data-scroll-target="#analyse-exploratoire">Analyse exploratoire</a>
  <ul class="collapse">
  <li><a href="#librairies" id="toc-librairies" class="nav-link" data-scroll-target="#librairies">Librairies</a></li>
  <li><a href="#récupération-des-données" id="toc-récupération-des-données" class="nav-link" data-scroll-target="#récupération-des-données">Récupération des données</a></li>
  <li><a href="#création-de-la-série-temporelle" id="toc-création-de-la-série-temporelle" class="nav-link" data-scroll-target="#création-de-la-série-temporelle">Création de la série temporelle</a></li>
  <li><a href="#visualisation" id="toc-visualisation" class="nav-link" data-scroll-target="#visualisation">Visualisation</a></li>
  <li><a href="#détection-outliers" id="toc-détection-outliers" class="nav-link" data-scroll-target="#détection-outliers">Détection outliers</a></li>
  <li><a href="#série-corrigée" id="toc-série-corrigée" class="nav-link" data-scroll-target="#série-corrigée">Série corrigée</a></li>
  <li><a href="#tests-de-saisonnalité" id="toc-tests-de-saisonnalité" class="nav-link" data-scroll-target="#tests-de-saisonnalité">Tests de saisonnalité</a>
  <ul class="collapse">
  <li><a href="#graphique" id="toc-graphique" class="nav-link" data-scroll-target="#graphique">Graphique</a></li>
  </ul></li>
  <li><a href="#vérification-de-la-stationnarité" id="toc-vérification-de-la-stationnarité" class="nav-link" data-scroll-target="#vérification-de-la-stationnarité">Vérification de la stationnarité</a>
  <ul class="collapse">
  <li><a href="#stationnarité-de-ipampa" id="toc-stationnarité-de-ipampa" class="nav-link" data-scroll-target="#stationnarité-de-ipampa">stationnarité de ipampa</a></li>
  </ul></li>
  <li><a href="#tendance" id="toc-tendance" class="nav-link" data-scroll-target="#tendance">Tendance</a>
  <ul class="collapse">
  <li><a href="#differentiation-de-la-série" id="toc-differentiation-de-la-série" class="nav-link" data-scroll-target="#differentiation-de-la-série">differentiation de la série</a></li>
  <li><a href="#correlogramme-série-brute-et-série-differencié" id="toc-correlogramme-série-brute-et-série-differencié" class="nav-link" data-scroll-target="#correlogramme-série-brute-et-série-differencié">Correlogramme série brute et série differencié</a></li>
  <li><a href="#periodogramme" id="toc-periodogramme" class="nav-link" data-scroll-target="#periodogramme">Periodogramme</a></li>
  </ul></li>
  <li><a href="#test-de-stationnarité-de-la-série-différencié-ipampa" id="toc-test-de-stationnarité-de-la-série-différencié-ipampa" class="nav-link" data-scroll-target="#test-de-stationnarité-de-la-série-différencié-ipampa">Test de stationnarité de la série différencié ipampa</a></li>
  <li><a href="#statistiques-descriptives" id="toc-statistiques-descriptives" class="nav-link" data-scroll-target="#statistiques-descriptives">Statistiques descriptives</a></li>
  </ul></li>
  <li><a href="#estimation-des-modèles-linéaires" id="toc-estimation-des-modèles-linéaires" class="nav-link" data-scroll-target="#estimation-des-modèles-linéaires">Estimation des modèles linéaires</a>
  <ul class="collapse">
  <li><a href="#modèle-ar1" id="toc-modèle-ar1" class="nav-link" data-scroll-target="#modèle-ar1">Modèle AR(1)</a></li>
  <li><a href="#modèle-arp" id="toc-modèle-arp" class="nav-link" data-scroll-target="#modèle-arp">Modèle AR(p)</a></li>
  <li><a href="#modèle-arimapdq" id="toc-modèle-arimapdq" class="nav-link" data-scroll-target="#modèle-arimapdq">Modèle ARIMA(p,d,q)</a></li>
  <li><a href="#modèle-holt-winter" id="toc-modèle-holt-winter" class="nav-link" data-scroll-target="#modèle-holt-winter">Modèle Holt-Winter</a></li>
  <li><a href="#modèle-adam-ets" id="toc-modèle-adam-ets" class="nav-link" data-scroll-target="#modèle-adam-ets">Modèle ADAM ETS</a></li>
  <li><a href="#modèle-adam-ets-arima" id="toc-modèle-adam-ets-arima" class="nav-link" data-scroll-target="#modèle-adam-ets-arima">Modèle ADAM ETS ARIMA</a></li>
  <li><a href="#modèle-ssarima" id="toc-modèle-ssarima" class="nav-link" data-scroll-target="#modèle-ssarima">Modèle SSARIMA</a></li>
  <li><a href="#modèle-ces" id="toc-modèle-ces" class="nav-link" data-scroll-target="#modèle-ces">Modèle CES</a></li>
  <li><a href="#modèle-naïf" id="toc-modèle-naïf" class="nav-link" data-scroll-target="#modèle-naïf">Modèle Naïf</a></li>
  </ul></li>
  <li><a href="#prévisions" id="toc-prévisions" class="nav-link" data-scroll-target="#prévisions">Prévisions</a>
  <ul class="collapse">
  <li><a href="#récupération-des-points-forecastes-dans-un-seul-dataframe" id="toc-récupération-des-points-forecastes-dans-un-seul-dataframe" class="nav-link" data-scroll-target="#récupération-des-points-forecastes-dans-un-seul-dataframe">Récupération des “points forecastes” dans un seul dataframe</a></li>
  <li><a href="#recuperation-des-données-2023" id="toc-recuperation-des-données-2023" class="nav-link" data-scroll-target="#recuperation-des-données-2023">Recuperation des données 2023</a>
  <ul class="collapse">
  <li><a href="#réintégration" id="toc-réintégration" class="nav-link" data-scroll-target="#réintégration">Réintégration</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#qualite-de-prevision" id="toc-qualite-de-prevision" class="nav-link" data-scroll-target="#qualite-de-prevision">Qualité de prévision</a>
  <ul class="collapse">
  <li><a href="#cspe-somme-cumulative-des-erreurs-pour-chaque-modèle-et-graphique" id="toc-cspe-somme-cumulative-des-erreurs-pour-chaque-modèle-et-graphique" class="nav-link" data-scroll-target="#cspe-somme-cumulative-des-erreurs-pour-chaque-modèle-et-graphique">CSPE somme cumulative des erreurs pour chaque modèle et graphique</a></li>
  <li><a href="#calcul-du-r2oos-pour-chaque-modèle" id="toc-calcul-du-r2oos-pour-chaque-modèle" class="nav-link" data-scroll-target="#calcul-du-r2oos-pour-chaque-modèle">Calcul du R2OOS pour chaque modèle</a></li>
  <li><a href="#calcul-du-mse-pour-chaque-modèle" id="toc-calcul-du-mse-pour-chaque-modèle" class="nav-link" data-scroll-target="#calcul-du-mse-pour-chaque-modèle">Calcul du MSE pour chaque modèle</a></li>
  <li><a href="#dm-test" id="toc-dm-test" class="nav-link" data-scroll-target="#dm-test">DM test</a></li>
  <li><a href="#accuracy" id="toc-accuracy" class="nav-link" data-scroll-target="#accuracy">Accuracy</a></li>
  <li><a href="#estimation-de-modeles-série-corrigé-non-stationnaire" id="toc-estimation-de-modeles-série-corrigé-non-stationnaire" class="nav-link" data-scroll-target="#estimation-de-modeles-série-corrigé-non-stationnaire">Estimation de modeles série corrigé (non stationnaire)</a>
  <ul class="collapse">
  <li><a href="#récuperation-des-previsions" id="toc-récuperation-des-previsions" class="nav-link" data-scroll-target="#récuperation-des-previsions">Récuperation des previsions</a></li>
  </ul></li>
  <li><a href="#série-complete-corrigée" id="toc-série-complete-corrigée" class="nav-link" data-scroll-target="#série-complete-corrigée">Série complete corrigée</a></li>
  <li><a href="#graphique-prévisions-de-modeles-comparés-au-données-corrigés" id="toc-graphique-prévisions-de-modeles-comparés-au-données-corrigés" class="nav-link" data-scroll-target="#graphique-prévisions-de-modeles-comparés-au-données-corrigés">Graphique Prévisions de modeles comparés au données corrigés</a></li>
  </ul></li>
  <li><a href="#qualité-de-prévision-2" id="toc-qualité-de-prévision-2" class="nav-link" data-scroll-target="#qualité-de-prévision-2">Qualité de prévision 2</a>
  <ul class="collapse">
  <li><a href="#cspe-2" id="toc-cspe-2" class="nav-link" data-scroll-target="#cspe-2">CSPE 2</a></li>
  <li><a href="#calcul-du-r2oos-2" id="toc-calcul-du-r2oos-2" class="nav-link" data-scroll-target="#calcul-du-r2oos-2">Calcul du R2OOS 2</a></li>
  <li><a href="#calcul-du-mse-2" id="toc-calcul-du-mse-2" class="nav-link" data-scroll-target="#calcul-du-mse-2">Calcul du MSE 2</a></li>
  <li><a href="#dm-test-2" id="toc-dm-test-2" class="nav-link" data-scroll-target="#dm-test-2">DM test 2</a></li>
  <li><a href="#prévision-modele-holt-winter" id="toc-prévision-modele-holt-winter" class="nav-link" data-scroll-target="#prévision-modele-holt-winter">Prévision modele Holt Winter</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Techniques de prévision et conjoncture</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Séries temporelles</div>
    <div class="quarto-category">ARIMA</div>
    <div class="quarto-category">ADAM</div>
    <div class="quarto-category">ARMAX</div>
    <div class="quarto-category">CES</div>
    <div class="quarto-category">LED</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Isabel PALACIO </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 1, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong>Évolution de l’indice des prix d’achat des moyens de production agricole en France</strong></p>
<p><strong>Janvier 2005 – Décembre 2023</strong></p>
<section id="résumé" class="level3">
<h3 class="anchored" data-anchor-id="résumé">Résumé</h3>
<p>L’indice des Prix d’Achat des Moyens de Production Agricole (IPAMPA) joue un rôle très important dans l’économie agricole en offrant un aperçu des coûts auxquels les agriculteurs sont confrontés. En 2023, les agriculteurs européens en Pologne, Roumanie, Slovaquie, Hongrie, Bulgarie, ainsi qu’en France, ont été confrontés à des défis marqués par des conditions climatiques extrêmes et une forte concurrence due aux importations à bas prix en provenance de l’Ukraine, considérées comme une « concurrence déloyale ». Ces tensions surviennent après une année 2022 difficile, marquée par des réserves en eau basses et des perturbations climatiques qui ont fortement impacté les rendements agricoles.</p>
<p>Dans ce contexte, comprendre l’évolution de l’IPAMPA ne concerne pas uniquement les acteurs du secteur agricole. En effet, les variations de cet indice ont également des répercussions sur les prix à la consommation. Tout changement dans les coûts de production se répercute, après un certain délai, sur les prix finaux, influençant ainsi le coût de la vie générale. Face à cette complexité, notre projet s’est concentré sur la prévision de l’IPAMPA à l’aide de plusieurs modèles de prévision statistique. Nous avons exploré diverses approches pour identifier le modèle le plus performant en fonction des spécificités de nos données.</p>
<p>L’objectif principal de notre étude a été de confronter ces modèles aux données réelles afin d’évaluer leur capacité à prédire précisément les fluctuations de l’IPAMPA. Ce processus nous permet non seulement de comprendre les défis associés à la prévision de cet indice, mais aussi d’appréhender les difficultés à développer un outil prédictif fiable.</p>
<div style="text-align: center;">
<iframe src="../../../pdf/prevision.pdf" width="80%" height="500px">
</iframe>
</div>
<p>Vous avez la possibilité de télécharger le document ici :) <a href="../../../pdf/prevision.pdf">📥 Télécharger le fichier PDF</a></p>
<p><strong>Présentation du code</strong></p>
<p>Je vous présente ci-dessous, le code utilisé pour mener à bien ce projet, avec les étapes et explications correspondantes.</p>
</section>
<section id="analyse-exploratoire" class="level1">
<h1>Analyse exploratoire</h1>
<section id="librairies" class="level3">
<h3 class="anchored" data-anchor-id="librairies">Librairies</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>({</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsoutliers)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TSA)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seastests)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(seasonal)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RJDemetra)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(EnvStats)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(smooth)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timeSeries)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Kendall) </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="récupération-des-données" class="level3">
<h3 class="anchored" data-anchor-id="récupération-des-données">Récupération des données</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>ipampa1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"serie_ipampa.xlsx"</span>), <span class="at">sheet =</span> <span class="st">'complete'</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>ipampa <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"serie_ipampa.xlsx"</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [216 × 2] (S3: tbl_df/tbl/data.frame)
 $ Période: chr [1:216] "2022-12" "2022-11" "2022-10" "2022-09" ...
 $ IPAMPA : num [1:216] 140 141 142 140 139 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>ipampa <span class="ot">&lt;-</span> ipampa[<span class="fu">nrow</span>(ipampa)<span class="sc">:</span><span class="dv">1</span>,]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>ipampa <span class="ot">&lt;-</span> ipampa[, <span class="dv">2</span>]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>ipampa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 216 × 1
   IPAMPA
    &lt;dbl&gt;
 1   78.2
 2   78.5
 3   79.1
 4   79.3
 5   78.9
 6   79.4
 7   79.8
 8   80  
 9   80.5
10   80.7
# ℹ 206 more rows</code></pre>
</div>
</div>
</section>
<section id="création-de-la-série-temporelle" class="level2">
<h2 class="anchored" data-anchor-id="création-de-la-série-temporelle">Création de la série temporelle</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>ipampa <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> ipampa, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">01</span>), <span class="at">frequency=</span><span class="dv">12</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisation" class="level2">
<h2 class="anchored" data-anchor-id="visualisation">Visualisation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec
2005  78.2  78.5  79.1  79.3  78.9  79.4  79.8  80.0  80.5  80.7  80.3  80.4
2006  80.8  81.1  81.3  81.8  81.8  81.8  81.9  82.1  81.9  82.1  82.3  82.5
2007  82.6  83.1  83.8  84.5  84.8  85.1  85.8  86.6  88.1  89.5  91.1  91.9
2008  93.2  94.4  95.7  96.9  98.8 100.2 101.3 100.6 100.6  99.5  97.7  95.8
2009  95.4  94.8  93.9  93.5  92.7  92.2  90.8  90.7  90.1  89.7  89.4  89.3
2010  89.5  89.8  90.4  91.0  91.2  91.4  91.3  92.1  93.7  95.0  95.6  96.6
2011  98.0  99.4 100.6 101.0 100.4 100.6 101.0 100.9 101.3 101.3 101.2 101.0
2012 100.6 101.2 101.9 102.3 102.3 101.8 103.1 105.1 106.0 106.5 106.4 106.3
2013 106.4 106.8 106.4 105.7 105.4 105.0 104.6 104.2 103.7 103.0 102.7 102.7
2014 102.9 103.0 103.1 103.3 103.3 103.1 102.5 102.1 101.6 101.0 100.4  99.5
2015  99.1 100.5 100.7 101.1 101.3 100.6 100.2  99.7  99.6  99.5  99.3  98.3
2016  97.8  97.5  97.6  97.4  97.9  97.8  97.3  96.9  97.0  97.4  97.2  98.3
2017  98.6  99.0  98.9  99.1  98.7  98.1  97.9  98.0  98.4  98.9  99.2  99.3
2018 100.1 100.1 100.4 101.1 102.0 101.9 102.2 102.7 103.6 104.6 104.5 103.8
2019 103.6 104.1 104.4 104.6 104.4 103.8 103.7 103.3 103.7 103.6 103.3 103.5
2020 103.6 103.4 102.3 101.7 101.7 101.8 101.8 101.8 101.5 102.1 102.6 103.1
2021 104.5 106.4 107.6 107.9 108.5 109.6 110.9 111.6 113.2 117.5 119.5 120.5
2022 123.1 124.9 133.2 134.6 136.1 138.6 138.2 138.9 139.5 142.0 141.3 139.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ipampa, <span class="at">xlab =</span> <span class="st">"Années"</span>, <span class="at">ylab =</span><span class="st">"indice 'IPAMPA'"</span>, <span class="at">main=</span> <span class="st">"Série brute"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Graphique avec ggplot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ts_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> <span class="fu">time</span>(ipampa), <span class="at">Value =</span> <span class="fu">as.numeric</span>(ipampa))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique ggplot</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ts_df, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value)) <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Value)) <span class="sc">+</span>  </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"darkgreen"</span>, <span class="at">high =</span> <span class="st">"red"</span>) <span class="sc">+</span>  </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="st">Indice mensuel des prix d'achat </span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="st">des moyens de production agricole (IPAMPA)"</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Période</span><span class="sc">\n</span><span class="st">(01/2005 - 12/2022)"</span>, <span class="at">y =</span> <span class="st">"Indice"</span>) <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Don't know how to automatically pick scale for object of type &lt;ts&gt;. Defaulting
to continuous.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="détection-outliers" class="level2">
<h2 class="anchored" data-anchor-id="détection-outliers">Détection outliers</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Automatic Procedure for Detection of Outliers</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tso</span>(ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: ipampa 
Regression with ARIMA(1,1,1) errors 

Coefficients:
         ar1      ma1   LS122   LS202   LS207   TC214
      0.8434  -0.2691  1.5395  2.7421  6.6747  2.4083
s.e.  0.0531   0.1062  0.4497  0.4520  0.4505  0.3936

sigma^2 = 0.2814:  log likelihood = -166.1
AIC=346.2   AICc=346.74   BIC=369.79

Outliers:
  type ind    time coefhat  tstat
1   LS 122 2015:02   1.539  3.423
2   LS 202 2021:10   2.742  6.067
3   LS 207 2022:03   6.675 14.817
4   TC 214 2022:10   2.408  6.119</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">tso</span>(ipampa)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: ipampa 
Regression with ARIMA(1,1,1) errors 

Coefficients:
         ar1      ma1   LS122   LS202   LS207   TC214
      0.8434  -0.2691  1.5395  2.7421  6.6747  2.4083
s.e.  0.0531   0.1062  0.4497  0.4520  0.4505  0.3936

sigma^2 = 0.2814:  log likelihood = -166.1
AIC=346.2   AICc=346.74   BIC=369.79

Outliers:
  type ind    time coefhat  tstat
1   LS 122 2015:02   1.539  3.423
2   LS 202 2021:10   2.742  6.067
3   LS 207 2022:03   6.675 14.817
4   TC 214 2022:10   2.408  6.119</code></pre>
</div>
</div>
</section>
<section id="série-corrigée" class="level2">
<h2 class="anchored" data-anchor-id="série-corrigée">Série corrigée</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># outlier-adjusted series</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>ipampa <span class="ot">&lt;-</span> fit<span class="sc">$</span>yadj</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ipampa, <span class="at">main=</span> <span class="st">"Série adjustée"</span>, <span class="at">xlab=</span> <span class="st">"Années"</span>, <span class="at">ylab =</span><span class="st">"indice 'IPAMPA"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Existence de 4 outliers 3 type LS et un type TC</p>
</section>
<section id="tests-de-saisonnalité" class="level2">
<h2 class="anchored" data-anchor-id="tests-de-saisonnalité">Tests de saisonnalité</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Friedman test</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ft <span class="ot">&lt;-</span> <span class="fu">fried</span>(ipampa)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(ft)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test used:  Friedman rank 
 
Test statistic:  15.81 
P-value:  0.1485093</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing the seasonality of series</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  a boolean value is returned : TRUE or FALSE</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>is <span class="ot">&lt;-</span> <span class="fu">isSeasonal</span>(ipampa, <span class="at">test=</span><span class="st">"wo"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(is)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kruskal-Wallis test</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>kwt <span class="ot">&lt;-</span> <span class="fu">kw</span>(ipampa)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(kwt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test used:  Kruskall Wallis 
 
Test statistic:  10.94 
P-value:  0.4482418</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seasonal dummies</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># impotant </span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> <span class="fu">seasdum</span>(ipampa)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test used:  SeasonalDummies 
 
Test statistic:  0.86 
P-value:  0.5759353</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Webel-Ollech test</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Webel-Ollech test - new version of seastests (2021-09)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># impotant </span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>wot <span class="ot">&lt;-</span> <span class="fu">combined_test</span>(ipampa)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">show</span>(wot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Test used:  WO 
 
Test statistic:  0 
P-value:  1 1 0.03397038</code></pre>
</div>
</div>
<p>Les tests confirment la non saisonnalité de la série IPAMPA</p>
<section id="graphique" class="level3">
<h3 class="anchored" data-anchor-id="graphique">Graphique</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trace une série chronologique avec son acf et soit son pacf, son nuage de points décalé ou son spectre</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggtsdisplay</span>(ipampa, <span class="at">plot.type=</span><span class="st">"histogram"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trace un graphique saisonnier où les données sont comparées aux saisons d'années distinctes</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggseasonplot(ipampa_ts, col=rainbow(12), year.labels=TRUE)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="vérification-de-la-stationnarité" class="level2">
<h2 class="anchored" data-anchor-id="vérification-de-la-stationnarité">Vérification de la stationnarité</h2>
<section id="stationnarité-de-ipampa" class="level3">
<h3 class="anchored" data-anchor-id="stationnarité-de-ipampa">stationnarité de ipampa</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  ipampa
Dickey-Fuller = -3.1388, Lag order = 5, p-value = 0.09931
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p>La série n’est pas stationnaire car le test ADF &gt; 0.05</p>
<p>Vu que notre série ne presente pas de saisonalité, nous allons faire un analyse sur la tendance</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>decomp <span class="ot">&lt;-</span> <span class="fu">decompose</span>(ipampa)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(decomp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="tendance" class="level2">
<h2 class="anchored" data-anchor-id="tendance">Tendance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test de tendence serie niveau</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">MannKendall</span>(ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tau = 0.568, 2-sided pvalue =&lt; 2.22e-16</code></pre>
</div>
</div>
<p>Dans notre cas, τ = 0.568 suggère une tendance croissante modérément forte dans la série temporelle à niveau, avec un p_value inférieur à 0,05 on peut dire que la série initial presente bien une tendance</p>
<section id="differentiation-de-la-série" class="level3">
<h3 class="anchored" data-anchor-id="differentiation-de-la-série">differentiation de la série</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>d_ipampa <span class="ot">&lt;-</span> <span class="fu">diff</span>(ipampa, <span class="at">differences =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique ggplot</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> <span class="fu">time</span>(d_ipampa), <span class="at">Value =</span> <span class="fu">as.numeric</span>(d_ipampa))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique ggplot</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value)) <span class="sc">+</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> Value)) <span class="sc">+</span>  </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"darkgreen"</span>, <span class="at">high =</span> <span class="st">"red"</span>) <span class="sc">+</span>  </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Série differenciée"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Dates"</span>, <span class="at">y =</span> <span class="st">"Indice"</span>) <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>),</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Don't know how to automatically pick scale for object of type &lt;ts&gt;. Defaulting
to continuous.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="correlogramme-série-brute-et-série-differencié" class="level3">
<h3 class="anchored" data-anchor-id="correlogramme-série-brute-et-série-differencié">Correlogramme série brute et série differencié</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(ipampa, <span class="at">main=</span><span class="st">"Correlogramme sur la série en niveau"</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(d_ipampa, <span class="at">main=</span><span class="st">"Correlogramme sur la série en différence première"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="periodogramme" class="level3">
<h3 class="anchored" data-anchor-id="periodogramme">Periodogramme</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Periodogramme</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">periodogram</span>(ipampa, <span class="at">main=</span><span class="st">"Periodogramme sur la série en niveau"</span>)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">periodogram</span>(d_ipampa, <span class="at">main=</span><span class="st">"Periodogramme sur la série en différence première"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="test-de-stationnarité-de-la-série-différencié-ipampa" class="level2">
<h2 class="anchored" data-anchor-id="test-de-stationnarité-de-la-série-différencié-ipampa">Test de stationnarité de la série différencié ipampa</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  d_ipampa
Dickey-Fuller = -3.564, Lag order = 5, p-value = 0.0378
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p>Apres la différentiation la série devient bien stationnaire</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>decomp <span class="ot">&lt;-</span> <span class="fu">decompose</span>(ipampa)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>decomp_d <span class="ot">&lt;-</span> <span class="fu">decompose</span>(d_ipampa)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>graph1 <span class="ot">&lt;-</span> <span class="fu">plot</span>(decomp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>graph2 <span class="ot">&lt;-</span> <span class="fu">plot</span>(decomp_d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="statistiques-descriptives" class="level2">
<h2 class="anchored" data-anchor-id="statistiques-descriptives">Statistiques descriptives</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       y          
 Min.   :-1.9000  
 1st Qu.:-0.2500  
 Median : 0.2000  
 Mean   : 0.2291  
 3rd Qu.: 0.6000  
 Max.   : 2.6000  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#histogramme</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(d_ipampa, <span class="at">main=</span> <span class="st">"Histogramme série corrigé"</span>, <span class="at">ylab=</span><span class="st">" Fréquence"</span>, <span class="at">xlab=</span><span class="st">"indice"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#skewness </span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>PerformanceAnalytics<span class="sc">::</span><span class="fu">skewness</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4496658</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">#kurtosis </span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>PerformanceAnalytics<span class="sc">::</span><span class="fu">kurtosis</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6254732</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>e1071<span class="sc">::</span><span class="fu">kurtosis</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5918263</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#normalité</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">shapiro.test</span>(d_ipampa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Shapiro-Wilk normality test

data:  d_ipampa
W = 0.97467, p-value = 0.0006498</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#boxplot</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(d_ipampa, <span class="at">main=</span><span class="st">"Boxplot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#test outliers</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rosnerTest</span>(d_ipampa, <span class="at">k=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Results of Outlier Test
-------------------------

Test Method:                     Rosner's Test for Outliers

Hypothesized Distribution:       Normal

Data:                            d_ipampa

Sample Size:                     215

Test Statistics:                 R.1  = 3.233268
                                 R.2  = 3.183835
                                 R.3  = 3.006058
                                 R.4  = 2.934315
                                 R.5  = 2.627525
                                 R.6  = 2.678351
                                 R.7  = 2.579619
                                 R.8  = 2.628374
                                 R.9  = 2.522953
                                 R.10 = 2.523867

Test Statistic Parameter:        k = 10

Alternative Hypothesis:          Up to 10 observations are not
                                 from the same Distribution.

Type I Error:                    5%

Number of Outliers Detected:     0

   i    Mean.i      SD.i Value Obs.Num    R.i+1 lambda.i+1 Outlier
1  0 0.2291333 0.7332725   2.6     204 3.233268   3.627118   FALSE
2  1 0.2180544 0.7167286   2.5     209 3.183835   3.625734   FALSE
3  2 0.2073411 0.7010315  -1.9      47 3.006058   3.624342   FALSE
4  3 0.2172814 0.6874795  -1.8      46 2.934315   3.622942   FALSE
5  4 0.2268419 0.6748397   2.0      91 2.627525   3.621535   FALSE
6  5 0.2183983 0.6651861   2.0     202 2.678351   3.620120   FALSE
7  6 0.2098739 0.6551844   1.9     193 2.579619   3.618697   FALSE
8  7 0.2017483 0.6461226   1.9      40 2.628374   3.617266   FALSE
9  8 0.1935442 0.6367363   1.8     205 2.522953   3.615828   FALSE
10 9 0.1857459 0.6283000  -1.4      54 2.523867   3.614381   FALSE</code></pre>
</div>
</div>
<p>Le test de shapiro, indique que notre série ne suit pas une loi normal</p>
<p>Le box plot nous indique des possibles outliers. La vérification avec le test de rosner nous indique que finalement il n’y pas</p>
</section>
</section>
<section id="estimation-des-modèles-linéaires" class="level1">
<h1>Estimation des modèles linéaires</h1>
<p>Modèles AR(1), AR(p) et ARIMA(p,d,q) et de la méthode LED Holt-Winters, ADAM ETS, ADAM ETS SARIMA, SSARIMA et CES</p>
<section id="modèle-ar1" class="level3">
<h3 class="anchored" data-anchor-id="modèle-ar1">Modèle AR(1)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametres modele AR(1)</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>ar1 <span class="ot">&lt;-</span> <span class="fu">auto.arima</span>(d_ipampa, <span class="at">max.p=</span><span class="dv">1</span>, <span class="at">max.q=</span><span class="dv">0</span>, <span class="at">d=</span><span class="dv">0</span>, <span class="at">stationary =</span> <span class="cn">TRUE</span>, <span class="at">seasonal =</span> <span class="cn">FALSE</span>, <span class="at">ic =</span> <span class="st">"aic"</span>, <span class="at">stepwise =</span> <span class="cn">TRUE</span>,  <span class="at">trace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Fitting models using approximations to speed things up...

 ARIMA(1,0,0)            with non-zero mean : 341.619
 ARIMA(0,0,0)            with non-zero mean : 479.739
 ARIMA(1,0,0)            with non-zero mean : 341.619
 ARIMA(0,0,0)            with zero mean     : 497.859
 ARIMA(1,0,0)            with zero mean     : 342.4367

 Now re-fitting the best model(s) without approximations...

 ARIMA(1,0,0)            with non-zero mean : 341.299

 Best model: ARIMA(1,0,0)            with non-zero mean </code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimation</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ar1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: d_ipampa 
ARIMA(1,0,0) with non-zero mean 

Coefficients:
         ar1    mean
      0.6966  0.2150
s.e.  0.0492  0.1172

sigma^2 = 0.2802:  log likelihood = -167.65
AIC=341.3   AICc=341.41   BIC=351.41

Training set error measures:
                       ME     RMSE       MAE MPE MAPE      MASE        ACF1
Training set -0.000387161 0.526914 0.3958932 NaN  Inf 0.5050639 -0.08971407</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(ar1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Ljung-Box test

data:  Residuals from ARIMA(1,0,0) with non-zero mean
Q* = 24.914, df = 23, p-value = 0.3548

Model df: 1.   Total lags used: 24</code></pre>
</div>
</div>
<p>Nombre de retards pour le test Ljung-BOx: 24, ce test permet de vérifier si les résidus de notre modèle sont effectivement du bruit blanc (c’est-à-dire non corrélés et avec une moyenne constante et une variance constante). Ici la P_value est de 0,354 donc &gt; 0,05 ; Il n’y a pas suffisamment de preuves pour rejeter l’hypothèse selon laquelle les résidus du modèle ARIMA(1,0,0) sont indépendants. Les résidus du modèle ne présentent pas d’autocorrélation significative à aucun des décalages testés.</p>
</section>
<section id="modèle-arp" class="level3">
<h3 class="anchored" data-anchor-id="modèle-arp">Modèle AR(p)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametres modele AR(p)</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>arp <span class="ot">&lt;-</span> <span class="fu">auto.arima</span>(d_ipampa, <span class="at">max.q=</span><span class="dv">0</span>, <span class="at">d=</span><span class="dv">0</span>, <span class="at">stationary =</span> <span class="cn">TRUE</span>, <span class="at">seasonal =</span> <span class="cn">FALSE</span>, <span class="at">ic =</span> <span class="st">"aic"</span>, <span class="at">stepwise =</span> <span class="cn">TRUE</span>,  <span class="at">trace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Fitting models using approximations to speed things up...

 ARIMA(2,0,0)            with non-zero mean : 340.2507
 ARIMA(0,0,0)            with non-zero mean : 479.739
 ARIMA(1,0,0)            with non-zero mean : 341.619
 ARIMA(0,0,0)            with zero mean     : 497.859
 ARIMA(3,0,0)            with non-zero mean : 342.3594
 ARIMA(2,0,0)            with zero mean     : 340.1487
 ARIMA(1,0,0)            with zero mean     : 342.4367
 ARIMA(3,0,0)            with zero mean     : 342.0625

 Now re-fitting the best model(s) without approximations...

 ARIMA(2,0,0)            with zero mean     : 339.5992

 Best model: ARIMA(2,0,0)            with zero mean     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimation</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(arp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: d_ipampa 
ARIMA(2,0,0) with zero mean 

Coefficients:
         ar1     ar2
      0.6144  0.1489
s.e.  0.0680  0.0680

sigma^2 = 0.2779:  log likelihood = -166.8
AIC=339.6   AICc=339.71   BIC=349.71

Training set error measures:
                     ME      RMSE       MAE MPE MAPE      MASE        ACF1
Training set 0.04941427 0.5246927 0.3970709 NaN  Inf 0.5065663 -0.01668794</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(arp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Ljung-Box test

data:  Residuals from ARIMA(2,0,0) with zero mean
Q* = 21.585, df = 22, p-value = 0.4849

Model df: 2.   Total lags used: 24</code></pre>
</div>
</div>
</section>
<section id="modèle-arimapdq" class="level3">
<h3 class="anchored" data-anchor-id="modèle-arimapdq">Modèle ARIMA(p,d,q)</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parametres modele AR(p,d,q)</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>arima <span class="ot">&lt;-</span> <span class="fu">auto.arima</span>(d_ipampa, <span class="at">stationary =</span> <span class="cn">TRUE</span>, <span class="at">seasonal =</span> <span class="cn">FALSE</span>, <span class="at">ic =</span> <span class="st">"aic"</span>, <span class="at">stepwise =</span> <span class="cn">TRUE</span>,  <span class="at">trace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Fitting models using approximations to speed things up...

 ARIMA(2,0,2)            with non-zero mean : 342.5512
 ARIMA(0,0,0)            with non-zero mean : 479.739
 ARIMA(1,0,0)            with non-zero mean : 341.619
 ARIMA(0,0,1)            with non-zero mean : 397.5533
 ARIMA(0,0,0)            with zero mean     : 497.859
 ARIMA(2,0,0)            with non-zero mean : 340.2507
 ARIMA(3,0,0)            with non-zero mean : 342.3594
 ARIMA(2,0,1)            with non-zero mean : 340.767
 ARIMA(1,0,1)            with non-zero mean : 338.5836
 ARIMA(1,0,2)            with non-zero mean : 339.5905
 ARIMA(0,0,2)            with non-zero mean : 360.2773
 ARIMA(1,0,1)            with zero mean     : 338.1744
 ARIMA(0,0,1)            with zero mean     : 408.3375
 ARIMA(1,0,0)            with zero mean     : 342.4367
 ARIMA(2,0,1)            with zero mean     : 340.0586
 ARIMA(1,0,2)            with zero mean     : 338.9206
 ARIMA(0,0,2)            with zero mean     : 366.344
 ARIMA(2,0,0)            with zero mean     : 340.1487
 ARIMA(2,0,2)            with zero mean     : 341.8261

 Now re-fitting the best model(s) without approximations...

 ARIMA(1,0,1)            with zero mean     : 338.1988

 Best model: ARIMA(1,0,1)            with zero mean     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimation</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(arima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: d_ipampa 
ARIMA(1,0,1) with zero mean 

Coefficients:
         ar1      ma1
      0.8434  -0.2691
s.e.  0.0527   0.1045

sigma^2 = 0.2761:  log likelihood = -166.1
AIC=338.2   AICc=338.31   BIC=348.31

Training set error measures:
                     ME      RMSE       MAE MPE MAPE      MASE       ACF1
Training set 0.04405366 0.5229599 0.3932828 NaN  Inf 0.5017336 0.01465994</code></pre>
</div>
</div>
</section>
<section id="modèle-holt-winter" class="level3">
<h3 class="anchored" data-anchor-id="modèle-holt-winter">Modèle Holt-Winter</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># un lissage exponentiel double (Holt-Winters sans composante saisonnière)</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co"># premier modele</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>holtw_model <span class="ot">&lt;-</span> <span class="fu">HoltWinters</span>(d_ipampa,<span class="at">gamma=</span><span class="cn">FALSE</span>) </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>holtw_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Holt-Winters exponential smoothing with trend and without seasonal component.

Call:
HoltWinters(x = d_ipampa, gamma = FALSE)

Smoothing parameters:
 alpha: 0.6535009
 beta : 0.05000744
 gamma: FALSE

Coefficients:
         [,1]
a -0.76012345
b -0.07822051</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(holtw_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Length Class  Mode     
fitted       639    mts    numeric  
x            215    ts     numeric  
alpha          1    -none- numeric  
beta           1    -none- numeric  
gamma          1    -none- logical  
coefficients   2    -none- numeric  
seasonal       1    -none- character
SSE            1    -none- numeric  
call           3    -none- call     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># modèle Holt-Winters package forecaste - deuxieme modele </span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>hw_f <span class="ot">&lt;-</span> <span class="fu">hw</span>(d_ipampa, <span class="at">seasonal =</span> <span class="cn">NULL</span>)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(hw_f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Forecast method: Holt-Winters' additive method

Model Information:
Holt-Winters' additive method 

Call:
hw(y = d_ipampa, seasonal = NULL)

  Smoothing parameters:
    alpha = 0.5271 
    beta  = 0.0028 
    gamma = 3e-04 

  Initial states:
    l = 0.0125 
    b = 0.0087 
    s = 0.2086 -0.327 -0.2191 0.0265 0.2662 -0.0816
           -0.1315 -0.0219 -0.0996 0.0853 0.045 0.249

  sigma:  0.5395

     AIC     AICc      BIC 
906.7153 909.8219 964.0161 

Error measures:
                      ME      RMSE       MAE MPE MAPE      MASE       ACF1
Training set -0.01440269 0.5190534 0.3883465 NaN  Inf 0.4954361 0.07842208

Forecasts:
         Point Forecast      Lo 80     Hi 80     Lo 95     Hi 95
Jan 2023    -0.11899046 -0.8104086 0.5724277 -1.176423 0.9384424
Feb 2023    -0.07826328 -0.8607539 0.7042273 -1.274979 1.1184528
Mar 2023    -0.28184860 -1.1466923 0.5829951 -1.604513 1.0408158
Apr 2023    -0.24232723 -1.1831015 0.6984470 -1.681117 1.1964628
May 2023    -0.42684394 -1.4385769 0.5848890 -1.974156 1.1204681
Jun 2023    -0.34980408 -1.4285091 0.7289009 -1.999541 1.2999329
Jul 2023    -0.45898101 -1.6013761 0.6834141 -2.206123 1.2881615
Aug 2023    -0.40898321 -1.6123107 0.7943443 -2.249314 1.4313474
Sep 2023    -0.06201067 -1.3239156 1.1998942 -1.991928 1.8679064
Oct 2023    -0.30085375 -1.6192978 1.0175903 -2.317240 1.7155325
Nov 2023    -0.54649791 -1.9196974 0.8267016 -2.646625 1.5536295
Dec 2023    -0.65465763 -2.0810370 0.7717217 -2.836117 1.5268013
Jan 2024    -0.11958951 -1.5977911 1.3586121 -2.380304 2.1411248
Feb 2024    -0.07886233 -1.6075814 1.4498567 -2.416836 2.2591117
Mar 2024    -0.28244765 -1.8605495 1.2956542 -2.695946 2.1310509
Apr 2024    -0.24292628 -1.8693821 1.3835296 -2.730376 2.2445233
May 2024    -0.42744299 -2.1013153 1.2464293 -2.987410 2.1325238
Jun 2024    -0.35040313 -2.0708342 1.3700279 -2.981575 2.2807691
Jul 2024    -0.45958006 -2.2257820 1.3066219 -3.160753 2.2415928
Aug 2024    -0.40958226 -2.2208293 1.4016647 -3.179645 2.3604810
Sep 2024    -0.06260973 -1.9182307 1.7930112 -2.900537 2.7753176
Oct 2024    -0.30145280 -2.2008257 1.5979201 -3.206293 2.6033874
Nov 2024    -0.54709696 -2.4896438 1.3954499 -3.517966 2.4237721
Dec 2024    -0.65525668 -2.6404390 1.3299257 -3.691331 2.3808177</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>hw_ff <span class="ot">&lt;-</span> <span class="fu">forecast</span>(hw_f, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hw_f<span class="sc">$</span>mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(hw_ff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Ljung-Box test

data:  Residuals from Holt-Winters' additive method
Q* = 18.017, df = 24, p-value = 0.8022

Model df: 0.   Total lags used: 24</code></pre>
</div>
</div>
<p>Modèle Holt - nous testons un troisième modele, avec la fonction Holt de forecast</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustement du modèle de Holt</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co">#holtW &lt;- holt(d_ipampa, h=12)</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(holtW)</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">#  résidus</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co">#checkresiduals(holtW)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modèle-adam-ets" class="level3">
<h3 class="anchored" data-anchor-id="modèle-adam-ets">Modèle ADAM ETS</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1er ADAM ETS</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>adam_ets <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(d_ipampa, <span class="at">model=</span><span class="st">"ZZN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">12</span>), </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">select=</span><span class="cn">TRUE</span>, <span class="at">ic =</span> <span class="st">"AIC"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The data is not strictly positive, so not all the distributions make
sense. Dropping dlnorm, dinvgauss, dgamma.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Message d'avertissement </span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="st">"Warning messages:</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="st">1: The data is not strictly positive, so not all the distributions make sense. Dropping dlnorm, dinvgauss, dgamma. </span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="st">2: Only additive models are allowed for your data. Changing the selection mechanism"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Warning messages:\n1: The data is not strictly positive, so not all the distributions make sense. Dropping dlnorm, dinvgauss, dgamma. \n2: Only additive models are allowed for your data. Changing the selection mechanism"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># estimation</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(ANN)+ARIMA(3,0,0)
Response variable: y
Distribution used in the estimation: Generalised Normal with shape=1.2895
Loss function type: likelihood; Loss function value: 158.6382
Coefficients:
            Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha         0.0003     0.0607     0.0000      0.1199  
phi1[1]       0.5854     0.0335     0.5195      0.6513 *
phi2[1]       0.0926     0.0040     0.0848      0.1005 *
phi3[1]       0.0918     0.0157     0.0608      0.1228 *
level         0.2758     0.1074     0.0641      0.4875 *
ARIMAState1  -0.0004     0.7456    -1.4705      1.4689  
ARIMAState2   0.0038     2.3852    -4.6990      4.7041  
ARIMAState3   0.0001     2.9640    -5.8437      5.8408  
other         1.2895     0.1638     0.9665      1.6124 *

Error standard deviation: 0.5494
Sample size: 215
Number of estimated parameters: 10
Number of degrees of freedom: 205
Information criteria:
     AIC     AICc      BIC     BICc 
337.2764 338.3548 370.9828 373.8787 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deuxieme adam_ets pour eviter le message d'avertissement </span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>adam_ets <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(d_ipampa, <span class="at">model=</span><span class="st">"AAN"</span>,  <span class="at">select=</span><span class="cn">TRUE</span>, <span class="at">ic =</span> <span class="st">"AIC"</span>, <span class="at">distribution =</span> <span class="fu">c</span>(<span class="st">"dnorm"</span>), <span class="at">bootstrap=</span><span class="cn">TRUE</span>, <span class="at">control=</span><span class="fu">list</span>(<span class="at">maxit=</span><span class="dv">1000</span>, <span class="at">trace=</span><span class="cn">TRUE</span>),<span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">0</span>), <span class="at">i =</span> <span class="fu">c</span>(<span class="dv">0</span>), <span class="at">ma =</span> <span class="fu">c</span>(<span class="dv">0</span>)))</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(AAN)
Response variable: y
Distribution used in the estimation: Normal
Loss function type: likelihood; Loss function value: 172.4178
Coefficients:
      Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha   0.5797     0.0661     0.4494      0.7099 *
beta    0.0001     0.0145     0.0000      0.0287  
level   0.3396     0.4910    -0.6284      1.3073  
trend  -0.0044     0.0217    -0.0472      0.0384  

Error standard deviation: 0.5608
Sample size: 215
Number of estimated parameters: 5
Number of degrees of freedom: 210
Information criteria:
     AIC     AICc      BIC     BICc 
354.8355 355.1226 371.6887 372.4596 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Warning message:</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="st">Observed Fisher Information is not positive semi-definite, which means that the likelihood was not maximised properly. Consider reestimating the model, tuning the optimiser or using bootstrap via bootstrap=TRUE."</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Warning message:\nObserved Fisher Information is not positive semi-definite, which means that the likelihood was not maximised properly. Consider reestimating the model, tuning the optimiser or using bootstrap via bootstrap=TRUE."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># troicieme adam_ets  modèle ADAM sans saisonnalité</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co"># adam_ets &lt;-auto.adam(d_ipampa, model="ANN", select=TRUE, ic="AIC", bootstrap=TRUE, distribution = c("dnorm", "dlaplace"), control=list(maxit=1000, trace=TRUE))</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co">#summary(adam_ets)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modèle-adam-ets-arima" class="level3">
<h3 class="anchored" data-anchor-id="modèle-adam-ets-arima">Modèle ADAM ETS ARIMA</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># premier test model ADAM ETS SARIMA</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>adam_ets_sa <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(d_ipampa, <span class="at">model=</span><span class="st">"ZZN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span><span class="fu">c</span>(<span class="dv">0</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The data is not strictly positive, so not all the distributions make
sense. Dropping dlnorm, dinvgauss, dgamma.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.
Warning: Only additive models are allowed for your data. Changing the selection
mechanism.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets_sa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(ANN)+ARIMA(3,0,0)
Response variable: y
Distribution used in the estimation: Generalised Normal with shape=1.2895
Loss function type: likelihood; Loss function value: 158.6382
Coefficients:
            Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha         0.0003     0.0607     0.0000      0.1199  
phi1[1]       0.5854     0.0335     0.5195      0.6513 *
phi2[1]       0.0926     0.0040     0.0848      0.1005 *
phi3[1]       0.0918     0.0157     0.0608      0.1228 *
level         0.2758     0.1074     0.0641      0.4875 *
ARIMAState1  -0.0004     0.7456    -1.4705      1.4689  
ARIMAState2   0.0038     2.3852    -4.6990      4.7041  
ARIMAState3   0.0001     2.9640    -5.8437      5.8408  
other         1.2895     0.1638     0.9665      1.6124 *

Error standard deviation: 0.5494
Sample size: 215
Number of estimated parameters: 10
Number of degrees of freedom: 205
Information criteria:
     AIC     AICc      BIC     BICc 
337.2764 338.3548 370.9828 373.8787 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Warning messages:</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="st">1: The data is not strictly positive, so not all the distributions make sense. Dropping dlnorm, dinvgauss, dgamma. </span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="st">2: Only additive models are allowed for your data. Changing the selection mechanism.  "</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Warning messages:\n1: The data is not strictly positive, so not all the distributions make sense. Dropping dlnorm, dinvgauss, dgamma. \n2: Only additive models are allowed for your data. Changing the selection mechanism.  "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apres modification pour éviter les message d'avertisment </span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>adam_ets_sa <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(d_ipampa, <span class="at">model=</span><span class="st">"AAN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span><span class="fu">c</span>(<span class="dv">0</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>), <span class="at">distribution =</span> <span class="fu">c</span>(<span class="st">"dnorm"</span>, <span class="st">"dlaplace"</span>))</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets_sa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(AAN)
Response variable: y
Distribution used in the estimation: Laplace
Loss function type: likelihood; Loss function value: 166.9445
Coefficients:
      Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha   0.5671     0.0061     0.5550      0.5791 *
beta    0.0000     0.0022     0.0000      0.0043  
level   0.2844     7.3964   -14.2962     14.8613  
trend   0.0158     0.0079     0.0003      0.0314 *

Error standard deviation: 0.5621
Sample size: 215
Number of estimated parameters: 5
Number of degrees of freedom: 210
Information criteria:
     AIC     AICc      BIC     BICc 
343.8889 344.1760 360.7421 361.5130 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="st">"Warning message:</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="st">Observed Fisher Information is not positive semi-definite, which means that the likelihood was not maximised properly. Consider reestimating the model, tuning the optimiser or using bootstrap via bootstrap=TRUE. "</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Warning message:\nObserved Fisher Information is not positive semi-definite, which means that the likelihood was not maximised properly. Consider reestimating the model, tuning the optimiser or using bootstrap via bootstrap=TRUE. "</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modele choisi</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>adam_ets_sa <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(d_ipampa, <span class="at">model=</span><span class="st">"ANN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span><span class="fu">c</span>(<span class="dv">0</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>), <span class="at">distribution=</span><span class="fu">c</span>(<span class="st">"dnorm"</span>, <span class="st">"dlaplace"</span>), <span class="at">bootstrap=</span><span class="cn">TRUE</span>,<span class="at">control=</span><span class="fu">list</span>(<span class="at">maxit=</span><span class="dv">3000</span>))</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets_sa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(ANN)+ARIMA(3,0,0)
Response variable: y
Distribution used in the estimation: Laplace
Loss function type: likelihood; Loss function value: 160.6124
Coefficients:
            Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha         0.0036     0.0050     0.0000      0.0135  
phi1[1]       0.5864     0.0520     0.4839      0.6889 *
phi2[1]       0.0559     0.0008     0.0543      0.0574 *
phi3[1]       0.1051     0.0125     0.0804      0.1298 *
level         0.2951     0.3738    -0.4419      1.0317  
ARIMAState1   0.0007     0.0844    -0.1657      0.1669  
ARIMAState2   0.0000     0.0794    -0.1565      0.1564  
ARIMAState3   0.0024     2.2856    -4.5038      4.5065  

Error standard deviation: 0.5488
Sample size: 215
Number of estimated parameters: 9
Number of degrees of freedom: 206
Information criteria:
     AIC     AICc      BIC     BICc 
339.2248 340.1028 369.5605 371.9184 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(adam_ets_sa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Observed Fisher Information is not positive semi-definite, which means
that the likelihood was not maximised properly. Consider reestimating the
model, tuning the optimiser or using bootstrap via bootstrap=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Model estimated using auto.adam() function: ETS(ANN)+ARIMA(3,0,0)
Response variable: y
Distribution used in the estimation: Laplace
Loss function type: likelihood; Loss function value: 160.6124
Coefficients:
            Estimate Std. Error Lower 2.5% Upper 97.5%  
alpha         0.0036     0.0050     0.0000      0.0135  
phi1[1]       0.5864     0.0520     0.4839      0.6889 *
phi2[1]       0.0559     0.0008     0.0543      0.0574 *
phi3[1]       0.1051     0.0125     0.0804      0.1298 *
level         0.2951     0.3738    -0.4419      1.0317  
ARIMAState1   0.0007     0.0844    -0.1657      0.1669  
ARIMAState2   0.0000     0.0794    -0.1565      0.1564  
ARIMAState3   0.0024     2.2856    -4.5038      4.5065  

Error standard deviation: 0.5488
Sample size: 215
Number of estimated parameters: 9
Number of degrees of freedom: 206
Information criteria:
     AIC     AICc      BIC     BICc 
339.2248 340.1028 369.5605 371.9184 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">forecast</span>(adam_ets_sa, <span class="at">h=</span><span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             Jan         Feb         Mar         Apr         May         Jun
2023 -0.62258914 -0.35958468 -0.30092313 -0.19125026 -0.09602462 -0.02789313
             Jul         Aug         Sep         Oct         Nov         Dec
2023  0.02890327  0.07602108  0.11398312  0.14484443  0.17001336  0.19048551</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># meme apres avoir reduit la complexité du modele cela donne l'avertissement </span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co">#adam_ets_sa_Test &lt;- auto.adam(d_ipampa, model="ANN", lags=c(1,12), orders=list(ar=c(1,1), i=c(0), ma=c(1,1),select=TRUE), distribution=c("dnorm", "dlaplace"), bootstrap=TRUE, bootstrap=TRUE, control=list(maxit=3000))</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co">#forecast(adam_ets_sa_Test, h=12)</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="co">#?auto.adam()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>si l’on veut éviter l’avertissement il faut mettre model = ‘ANN’, mais cela implique que les prévision sont toutes égales. sur le graphique cela donne une ligne droite</p>
<p>forecast(adam_ets_sa_Test, h=12) Jan Feb Mar Apr May 2023 -0.588298 -0.588298 -0.588298 -0.588298 -0.588298 Jun Jul Aug Sep Oct 2023 -0.588298 -0.588298 -0.588298 -0.588298 -0.588298 Nov Dec 2023 -0.588298 -0.588298</p>
<p>On continue avec l’avertissement …</p>
</section>
<section id="modèle-ssarima" class="level3">
<h3 class="anchored" data-anchor-id="modèle-ssarima">Modèle SSARIMA</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SSARIMA</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>ssarima <span class="ot">&lt;-</span> <span class="fu">auto.ssarima</span>(d_ipampa, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span>(<span class="dv">0</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>), <span class="at">ic=</span><span class="st">"AICc"</span>)</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>ssarima </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time elapsed: 0.92 seconds
Model estimated: ARIMA(3,0,3)
Matrix of AR terms:
       Lag 1
AR(1) 0.1719
AR(2) 0.0180
AR(3) 0.5445
Matrix of MA terms:
        Lag 1
MA(1)  0.4367
MA(2)  0.3575
MA(3) -0.3599
Initial values were produced using backcasting.

Loss function type: likelihood; Loss function value: 161.0136
Error standard deviation: 0.5202
Sample size: 215
Number of estimated parameters: 7
Number of degrees of freedom: 208
Information criteria:
     AIC     AICc      BIC     BICc 
336.0272 336.5682 359.6216 361.0746 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ssarima)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time elapsed: 0.92 seconds
Model estimated: ARIMA(3,0,3)
Matrix of AR terms:
       Lag 1
AR(1) 0.1719
AR(2) 0.0180
AR(3) 0.5445
Matrix of MA terms:
        Lag 1
MA(1)  0.4367
MA(2)  0.3575
MA(3) -0.3599
Initial values were produced using backcasting.

Loss function type: likelihood; Loss function value: 161.0136
Error standard deviation: 0.5202
Sample size: 215
Number of estimated parameters: 7
Number of degrees of freedom: 208
Information criteria:
     AIC     AICc      BIC     BICc 
336.0272 336.5682 359.6216 361.0746 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">auto.ssarima</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modèle-ces" class="level3">
<h3 class="anchored" data-anchor-id="modèle-ces">Modèle CES</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># auto </span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>ces <span class="ot">&lt;-</span> <span class="fu">auto.ces</span>(d_ipampa, <span class="at">models=</span><span class="fu">c</span>(<span class="st">"n"</span>, <span class="st">"s"</span>, <span class="st">"p"</span>, <span class="st">"f"</span>), <span class="at">ic=</span><span class="st">"AICc"</span>) <span class="co">#  tester plusieurs types de modèles </span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time elapsed: 0.89 seconds
Model estimated: CES(f)
a0 + ia1: 1.4655+0.9264i
b0 + ib1: 0.995+0.9989i
Initial values were produced using backcasting.

Loss function type: likelihood; Loss function value: 158.5716
Error standard deviation: 0.5119
Sample size: 215
Number of estimated parameters: 5
Number of degrees of freedom: 210
Information criteria:
     AIC     AICc      BIC     BICc 
327.1431 327.4302 343.9963 344.7672 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>ces</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time elapsed: 0.89 seconds
Model estimated: CES(f)
a0 + ia1: 1.4655+0.9264i
b0 + ib1: 0.995+0.9989i
Initial values were produced using backcasting.

Loss function type: likelihood; Loss function value: 158.5716
Error standard deviation: 0.5119
Sample size: 215
Number of estimated parameters: 5
Number of degrees of freedom: 210
Information criteria:
     AIC     AICc      BIC     BICc 
327.1431 327.4302 343.9963 344.7672 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(ces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Ljung-Box test

data:  Residuals
Q* = 24.373, df = 24, p-value = 0.4405

Model df: 0.   Total lags used: 24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">#?auto.ces()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modèle-naïf" class="level3">
<h3 class="anchored" data-anchor-id="modèle-naïf">Modèle Naïf</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>naive <span class="ot">&lt;-</span> <span class="fu">naive</span>(d_ipampa, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(naive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Forecast method: Naive method

Model Information:
Call: naive(y = d_ipampa, h = 12) 

Residual sd: 0.5714 

Error measures:
                       ME      RMSE       MAE MPE MAPE      MASE       ACF1
Training set -0.006982548 0.5714192 0.4232642 NaN  Inf 0.5399827 -0.2612091

Forecasts:
         Point Forecast     Lo 80       Hi 80     Lo 95       Hi 95
Jan 2023      -1.194265 -1.926568 -0.46196213 -2.314226 -0.07430425
Feb 2023      -1.194265 -2.229898 -0.15863223 -2.778129  0.38959880
Mar 2023      -1.194265 -2.462652  0.07412099 -3.134095  0.74556413
Apr 2023      -1.194265 -2.658872  0.27034103 -3.434187  1.04565679
May 2023      -1.194265 -2.831745  0.44321436 -3.698574  1.31004373
Jun 2023      -1.194265 -2.988034  0.59950379 -3.937598  1.54906779
Jul 2023      -1.194265 -3.131757  0.74322676 -4.157404  1.76887310
Aug 2023      -1.194265 -3.265531  0.87700084 -4.361993  1.97346289
Sep 2023      -1.194265 -3.391175  1.00264420 -4.554148  2.16561783
Oct 2023      -1.194265 -3.510011  1.12148064 -4.735893  2.34736248
Nov 2023      -1.194265 -3.623040  1.23450953 -4.908756  2.52022526
Dec 2023      -1.194265 -3.731038  1.34250728 -5.073924  2.68539355</code></pre>
</div>
</div>
</section>
</section>
<section id="prévisions" class="level1">
<h1>Prévisions</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle AR(1)</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>ar1_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ar1, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ar1_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle AR(1)"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle AR(p)</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>arp_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(arp, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(arp_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle AR(p)"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle ARIMA</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>arima_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(arima, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(arima_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle ARIMA"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle Holt (LED Holt sans saisonnalité)</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">#holt_forecast &lt;- forecast(holtw_model, h=12, interval="confidence", level = 0.90)</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(holt_forecast, main="Prévision pour le modèle Holt", xlab="Mois", ylab="Valeurs", col="purple")</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>hw_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(hw_f, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(hw_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle Holt Winter"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle ADAM ETS</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>adam_ets_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(adam_ets, <span class="at">h=</span><span class="dv">12</span>, <span class="at">interval=</span><span class="st">"confidence"</span>, <span class="at">level =</span> <span class="fl">0.90</span>)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(adam_ets_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle ADAM ETS"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle ADAM ES </span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>adamES_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(adam_ets_sa, <span class="at">h=</span><span class="dv">12</span>, <span class="at">level =</span> <span class="fl">0.90</span>)</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(adamES_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle ADAM ETS SARIMA"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle SSARIMA - State Space ARIMA</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>ssarima_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ssarima, <span class="at">h=</span><span class="dv">12</span>,  <span class="at">level =</span> <span class="fl">0.90</span>)</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ssarima_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle SSARIMA"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Prévision et tracé pour le modèle CES</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>ces_forecast <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ces, <span class="at">h=</span><span class="dv">12</span>,  <span class="at">level =</span> <span class="fl">0.90</span>)</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ces_forecast, <span class="at">main=</span><span class="st">"Prévision pour le modèle CES"</span>, <span class="at">xlab=</span><span class="st">"Mois"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>, <span class="at">col=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Graphique prévsion modele naive</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(naive, <span class="at">main=</span><span class="st">" Méthode de Prévision Naïve"</span>, <span class="at">xlab=</span><span class="st">"Temps"</span>, <span class="at">ylab=</span><span class="st">"Valeurs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-30-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="récupération-des-points-forecastes-dans-un-seul-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="récupération-des-points-forecastes-dans-un-seul-dataframe">Récupération des “points forecastes” dans un seul dataframe</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>start_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>) <span class="co"># La date de début des prévisions</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>forecast_horizon <span class="ot">&lt;-</span> <span class="dv">12</span> <span class="co"># Le nombre de mois à prévoir</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="co"># séquence de dates pour les prévisions</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a>forecast_dates <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_date, <span class="at">by =</span> <span class="st">"month"</span>, <span class="at">length.out =</span> forecast_horizon)</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  data frames avec les dates et les previsions</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date =</span> forecast_dates,</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">AR1 =</span> <span class="fu">as.numeric</span>(ar1_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARP =</span> <span class="fu">as.numeric</span>(arp_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARIMA =</span><span class="fu">as.numeric</span>(arima_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">HOLT =</span> <span class="fu">as.numeric</span>(hw_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">ADAM_ETS =</span> <span class="fu">as.numeric</span>(adam_ets_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">ADAM_ETS_SARIMA =</span> <span class="fu">as.numeric</span>(adamES_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">SSARIMA =</span>  <span class="fu">as.numeric</span>(ssarima_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">CES =</span> <span class="fu">as.numeric</span>(ces_forecast<span class="sc">$</span>mean),</span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">NAIVE =</span> <span class="fu">as.numeric</span>(naive<span class="sc">$</span>mean)</span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date         AR1         ARP      ARIMA        HOLT   ADAM_ETS
1  2023-01-01 -0.76672710 -0.73037881 -0.6694243 -0.11899046 -0.6432482
2  2023-02-01 -0.46889491 -0.62651673 -0.5646122 -0.07826328 -0.6606814
3  2023-03-01 -0.26141868 -0.49364745 -0.4762105 -0.28184860 -0.6779770
4  2023-04-01 -0.11688633 -0.39655404 -0.4016499 -0.24232723 -0.6945137
5  2023-05-01 -0.01620203 -0.31712205 -0.3387634 -0.42684394 -0.7112971
6  2023-06-01  0.05393680 -0.25386675 -0.2857230 -0.34980408 -0.7270746
7  2023-07-01  0.10279699 -0.20317926 -0.2409872 -0.45898101 -0.7437233
8  2023-08-01  0.13683404 -0.16262133 -0.2032557 -0.40898321 -0.7604755
9  2023-09-01  0.16054497 -0.13015772 -0.1714318 -0.06201067 -0.7774719
10 2023-10-01  0.17706251 -0.10417504 -0.1445906 -0.30085375 -0.7944000
11 2023-11-01  0.18856898 -0.08337908 -0.1219520 -0.54649791 -0.8110963
12 2023-12-01  0.19658463 -0.06673454 -0.1028579 -0.65465763 -0.8290626
   ADAM_ETS_SARIMA    SSARIMA         CES     NAIVE
1      -0.62258914 -0.3992712 -0.24360607 -1.194265
2      -0.35958468 -0.5418099  0.01295041 -1.194265
3      -0.30092313 -0.3051800 -0.17555379 -1.194265
4      -0.19125026 -0.2796120 -0.16331942 -1.194265
5      -0.09602462 -0.3485568 -0.23342431 -1.194265
6      -0.02789313 -0.2311090 -0.33789275 -1.194265
7       0.02890327 -0.1982459 -0.28771617 -1.194265
8       0.07602108 -0.2280172 -0.27307246 -1.194265
9       0.11398312 -0.1685953 -0.05269430 -1.194265
10      0.14484443 -0.1410267 -0.12204586 -1.194265
11      0.17001336 -0.1514261 -0.34386009 -1.194265
12      0.19048551 -0.1203632 -0.35952800 -1.194265</code></pre>
</div>
</div>
</section>
<section id="recuperation-des-données-2023" class="level2">
<h2 class="anchored" data-anchor-id="recuperation-des-données-2023">Recuperation des données 2023</h2>
<p>Lors du Téléchargement de notre jeu de données nous nous sommes arrêtés au mois de décembre 2022 et mis de coté les données pour l’année 2023, on récupère les données pour les comparer aux modèles</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>real <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"serie_ipampa.xlsx"</span>), <span class="at">sheet =</span> <span class="st">'complete'</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>real <span class="ot">&lt;-</span> real[<span class="fu">nrow</span>(real)<span class="sc">:</span><span class="dv">1</span>,]</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>real <span class="ot">&lt;-</span> real[, <span class="dv">2</span>]</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>real <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> real, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">01</span>), <span class="at">frequency=</span><span class="dv">12</span>) </span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>real_2023 <span class="ot">&lt;-</span> <span class="fu">window</span>(real, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">1</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">12</span>))</span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>real_2023</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec
2023 140.1 138.6 137.5 135.5 133.5 132.0 130.8 132.1 132.4 131.9 130.9 129.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>real_d <span class="ot">&lt;-</span> <span class="fu">diff</span>(real, <span class="at">differences =</span> <span class="dv">1</span>)</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>real_d <span class="ot">&lt;-</span> <span class="fu">window</span>(real_d, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">1</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">12</span>))</span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(real_d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>real_d <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(real_d)</span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>Real <span class="ot">=</span> real_d</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date         AR1         ARP      ARIMA        HOLT   ADAM_ETS
1  2023-01-01 -0.76672710 -0.73037881 -0.6694243 -0.11899046 -0.6432482
2  2023-02-01 -0.46889491 -0.62651673 -0.5646122 -0.07826328 -0.6606814
3  2023-03-01 -0.26141868 -0.49364745 -0.4762105 -0.28184860 -0.6779770
4  2023-04-01 -0.11688633 -0.39655404 -0.4016499 -0.24232723 -0.6945137
5  2023-05-01 -0.01620203 -0.31712205 -0.3387634 -0.42684394 -0.7112971
6  2023-06-01  0.05393680 -0.25386675 -0.2857230 -0.34980408 -0.7270746
7  2023-07-01  0.10279699 -0.20317926 -0.2409872 -0.45898101 -0.7437233
8  2023-08-01  0.13683404 -0.16262133 -0.2032557 -0.40898321 -0.7604755
9  2023-09-01  0.16054497 -0.13015772 -0.1714318 -0.06201067 -0.7774719
10 2023-10-01  0.17706251 -0.10417504 -0.1445906 -0.30085375 -0.7944000
11 2023-11-01  0.18856898 -0.08337908 -0.1219520 -0.54649791 -0.8110963
12 2023-12-01  0.19658463 -0.06673454 -0.1028579 -0.65465763 -0.8290626
   ADAM_ETS_SARIMA    SSARIMA         CES     NAIVE Real
1      -0.62258914 -0.3992712 -0.24360607 -1.194265  0.5
2      -0.35958468 -0.5418099  0.01295041 -1.194265 -1.5
3      -0.30092313 -0.3051800 -0.17555379 -1.194265 -1.1
4      -0.19125026 -0.2796120 -0.16331942 -1.194265 -2.0
5      -0.09602462 -0.3485568 -0.23342431 -1.194265 -2.0
6      -0.02789313 -0.2311090 -0.33789275 -1.194265 -1.5
7       0.02890327 -0.1982459 -0.28771617 -1.194265 -1.2
8       0.07602108 -0.2280172 -0.27307246 -1.194265  1.3
9       0.11398312 -0.1685953 -0.05269430 -1.194265  0.3
10      0.14484443 -0.1410267 -0.12204586 -1.194265 -0.5
11      0.17001336 -0.1514261 -0.34386009 -1.194265 -1.0
12      0.19048551 -0.1203632 -0.35952800 -1.194265 -1.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span> (df) <span class="co"># on verifie que real fait bien partie du data frame </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Date"            "AR1"             "ARP"             "ARIMA"          
 [5] "HOLT"            "ADAM_ETS"        "ADAM_ETS_SARIMA" "SSARIMA"        
 [9] "CES"             "NAIVE"           "Real"           </code></pre>
</div>
</div>
<p>Graphique de comparaison</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les données en format long</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>df_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(df, <span class="at">cols =</span> <span class="sc">-</span>Date, <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique plotly</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_long, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison des prévisions des modèles avec les données réelles</span></span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="st">       Jan 2023 à Déc 2023 - série differencié"</span>,</span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valeur"</span>,</span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Modèle"</span>) <span class="sc">+</span></span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span>
<span id="cb152-14"><a href="#cb152-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-15"><a href="#cb152-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-16"><a href="#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-a180026c526b34cbd6de" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a180026c526b34cbd6de">{"x":{"data":[{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.64324816565412002,-0.66068135179236953,-0.67797695379198175,-0.69451372818594437,-0.71129711167188503,-0.72707460975422278,-0.74372332285002896,-0.76047545022551311,-0.77747194230845729,-0.7944000233150067,-0.81109629925446614,-0.8290625999758866],"text":["Date: 2023-01-01<br />Value: -0.64324817<br />Model: ADAM_ETS","Date: 2023-02-01<br />Value: -0.66068135<br />Model: ADAM_ETS","Date: 2023-03-01<br />Value: -0.67797695<br />Model: ADAM_ETS","Date: 2023-04-01<br />Value: -0.69451373<br />Model: ADAM_ETS","Date: 2023-05-01<br />Value: -0.71129711<br />Model: ADAM_ETS","Date: 2023-06-01<br />Value: -0.72707461<br />Model: ADAM_ETS","Date: 2023-07-01<br />Value: -0.74372332<br />Model: ADAM_ETS","Date: 2023-08-01<br />Value: -0.76047545<br />Model: ADAM_ETS","Date: 2023-09-01<br />Value: -0.77747194<br />Model: ADAM_ETS","Date: 2023-10-01<br />Value: -0.79440002<br />Model: ADAM_ETS","Date: 2023-11-01<br />Value: -0.81109630<br />Model: ADAM_ETS","Date: 2023-12-01<br />Value: -0.82906260<br />Model: ADAM_ETS"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS","legendgroup":"ADAM_ETS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.62258913668980043,-0.35958468024176465,-0.30092313142104082,-0.19125025939708568,-0.096024619780947451,-0.027893133563162309,0.028903268156281858,0.076021080921534284,0.11398311990303558,0.14484442676698819,0.17001335592901901,0.19048551066930774],"text":["Date: 2023-01-01<br />Value: -0.62258914<br />Model: ADAM_ETS_SARIMA","Date: 2023-02-01<br />Value: -0.35958468<br />Model: ADAM_ETS_SARIMA","Date: 2023-03-01<br />Value: -0.30092313<br />Model: ADAM_ETS_SARIMA","Date: 2023-04-01<br />Value: -0.19125026<br />Model: ADAM_ETS_SARIMA","Date: 2023-05-01<br />Value: -0.09602462<br />Model: ADAM_ETS_SARIMA","Date: 2023-06-01<br />Value: -0.02789313<br />Model: ADAM_ETS_SARIMA","Date: 2023-07-01<br />Value:  0.02890327<br />Model: ADAM_ETS_SARIMA","Date: 2023-08-01<br />Value:  0.07602108<br />Model: ADAM_ETS_SARIMA","Date: 2023-09-01<br />Value:  0.11398312<br />Model: ADAM_ETS_SARIMA","Date: 2023-10-01<br />Value:  0.14484443<br />Model: ADAM_ETS_SARIMA","Date: 2023-11-01<br />Value:  0.17001336<br />Model: ADAM_ETS_SARIMA","Date: 2023-12-01<br />Value:  0.19048551<br />Model: ADAM_ETS_SARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(216,144,0,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS_SARIMA","legendgroup":"ADAM_ETS_SARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.76672709887241819,-0.46889491186513726,-0.26141868312982003,-0.11688633448485181,-0.016202029915772548,0.053936795624664968,0.10279699155338298,0.13683404204286315,0.16054497451054264,0.17706251379205645,0.18856898256076671,0.19658463315307276],"text":["Date: 2023-01-01<br />Value: -0.76672710<br />Model: AR1","Date: 2023-02-01<br />Value: -0.46889491<br />Model: AR1","Date: 2023-03-01<br />Value: -0.26141868<br />Model: AR1","Date: 2023-04-01<br />Value: -0.11688633<br />Model: AR1","Date: 2023-05-01<br />Value: -0.01620203<br />Model: AR1","Date: 2023-06-01<br />Value:  0.05393680<br />Model: AR1","Date: 2023-07-01<br />Value:  0.10279699<br />Model: AR1","Date: 2023-08-01<br />Value:  0.13683404<br />Model: AR1","Date: 2023-09-01<br />Value:  0.16054497<br />Model: AR1","Date: 2023-10-01<br />Value:  0.17706251<br />Model: AR1","Date: 2023-11-01<br />Value:  0.18856898<br />Model: AR1","Date: 2023-12-01<br />Value:  0.19658463<br />Model: AR1"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"AR1","legendgroup":"AR1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.66942431056690621,-0.56461215041306456,-0.47621049215272504,-0.40164993380045622,-0.33876336615904129,-0.28572298559974102,-0.24098716878879667,-0.20325566526941896,-0.17143180556771076,-0.1445906263977928,-0.12195198652241129,-0.10285789187914753],"text":["Date: 2023-01-01<br />Value: -0.66942431<br />Model: ARIMA","Date: 2023-02-01<br />Value: -0.56461215<br />Model: ARIMA","Date: 2023-03-01<br />Value: -0.47621049<br />Model: ARIMA","Date: 2023-04-01<br />Value: -0.40164993<br />Model: ARIMA","Date: 2023-05-01<br />Value: -0.33876337<br />Model: ARIMA","Date: 2023-06-01<br />Value: -0.28572299<br />Model: ARIMA","Date: 2023-07-01<br />Value: -0.24098717<br />Model: ARIMA","Date: 2023-08-01<br />Value: -0.20325567<br />Model: ARIMA","Date: 2023-09-01<br />Value: -0.17143181<br />Model: ARIMA","Date: 2023-10-01<br />Value: -0.14459063<br />Model: ARIMA","Date: 2023-11-01<br />Value: -0.12195199<br />Model: ARIMA","Date: 2023-12-01<br />Value: -0.10285789<br />Model: ARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(57,182,0,1)","dash":"solid"},"hoveron":"points","name":"ARIMA","legendgroup":"ARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.73037880896847007,-0.62651672742651943,-0.49364745201109195,-0.39655403741384798,-0.31712204585938353,-0.25386674828288136,-0.20317925556932323,-0.16262132847754601,-0.13015771884047131,-0.10417504116839216,-0.083379084892844998,-0.066734535143469095],"text":["Date: 2023-01-01<br />Value: -0.73037881<br />Model: ARP","Date: 2023-02-01<br />Value: -0.62651673<br />Model: ARP","Date: 2023-03-01<br />Value: -0.49364745<br />Model: ARP","Date: 2023-04-01<br />Value: -0.39655404<br />Model: ARP","Date: 2023-05-01<br />Value: -0.31712205<br />Model: ARP","Date: 2023-06-01<br />Value: -0.25386675<br />Model: ARP","Date: 2023-07-01<br />Value: -0.20317926<br />Model: ARP","Date: 2023-08-01<br />Value: -0.16262133<br />Model: ARP","Date: 2023-09-01<br />Value: -0.13015772<br />Model: ARP","Date: 2023-10-01<br />Value: -0.10417504<br />Model: ARP","Date: 2023-11-01<br />Value: -0.08337908<br />Model: ARP","Date: 2023-12-01<br />Value: -0.06673454<br />Model: ARP"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"ARP","legendgroup":"ARP","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.24360606969427784,0.012950410738757995,-0.17555378729275009,-0.1633194222064305,-0.23342430880322351,-0.33789274535728309,-0.28771616990522697,-0.27307246396856655,-0.052694299432494082,-0.12204585657844846,-0.34386008614788333,-0.35952799672505892],"text":["Date: 2023-01-01<br />Value: -0.24360607<br />Model: CES","Date: 2023-02-01<br />Value:  0.01295041<br />Model: CES","Date: 2023-03-01<br />Value: -0.17555379<br />Model: CES","Date: 2023-04-01<br />Value: -0.16331942<br />Model: CES","Date: 2023-05-01<br />Value: -0.23342431<br />Model: CES","Date: 2023-06-01<br />Value: -0.33789275<br />Model: CES","Date: 2023-07-01<br />Value: -0.28771617<br />Model: CES","Date: 2023-08-01<br />Value: -0.27307246<br />Model: CES","Date: 2023-09-01<br />Value: -0.05269430<br />Model: CES","Date: 2023-10-01<br />Value: -0.12204586<br />Model: CES","Date: 2023-11-01<br />Value: -0.34386009<br />Model: CES","Date: 2023-12-01<br />Value: -0.35952800<br />Model: CES"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"CES","legendgroup":"CES","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.11899046439851604,-0.078263281561240017,-0.28184859883700014,-0.24232723308452975,-0.42684394177005736,-0.34980408058762225,-0.45898100574481371,-0.40898320611526018,-0.062010674534698773,-0.30085374726521646,-0.54649790511704233,-0.65465763325595816],"text":["Date: 2023-01-01<br />Value: -0.11899046<br />Model: HOLT","Date: 2023-02-01<br />Value: -0.07826328<br />Model: HOLT","Date: 2023-03-01<br />Value: -0.28184860<br />Model: HOLT","Date: 2023-04-01<br />Value: -0.24232723<br />Model: HOLT","Date: 2023-05-01<br />Value: -0.42684394<br />Model: HOLT","Date: 2023-06-01<br />Value: -0.34980408<br />Model: HOLT","Date: 2023-07-01<br />Value: -0.45898101<br />Model: HOLT","Date: 2023-08-01<br />Value: -0.40898321<br />Model: HOLT","Date: 2023-09-01<br />Value: -0.06201067<br />Model: HOLT","Date: 2023-10-01<br />Value: -0.30085375<br />Model: HOLT","Date: 2023-11-01<br />Value: -0.54649791<br />Model: HOLT","Date: 2023-12-01<br />Value: -0.65465763<br />Model: HOLT"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"HOLT","legendgroup":"HOLT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633,-1.1942652903955633],"text":["Date: 2023-01-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-02-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-03-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-04-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-05-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-06-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-07-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-08-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-09-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-10-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-11-01<br />Value: -1.19426529<br />Model: NAIVE","Date: 2023-12-01<br />Value: -1.19426529<br />Model: NAIVE"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(149,144,255,1)","dash":"solid"},"hoveron":"points","name":"NAIVE","legendgroup":"NAIVE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[0.5,-1.5,-1.0999999999999943,-2,-2,-1.5,-1.1999999999999886,1.2999999999999829,0.30000000000001137,-0.5,-1,-1.4000000000000057],"text":["Date: 2023-01-01<br />Value:  0.50000000<br />Model: Real","Date: 2023-02-01<br />Value: -1.50000000<br />Model: Real","Date: 2023-03-01<br />Value: -1.10000000<br />Model: Real","Date: 2023-04-01<br />Value: -2.00000000<br />Model: Real","Date: 2023-05-01<br />Value: -2.00000000<br />Model: Real","Date: 2023-06-01<br />Value: -1.50000000<br />Model: Real","Date: 2023-07-01<br />Value: -1.20000000<br />Model: Real","Date: 2023-08-01<br />Value:  1.30000000<br />Model: Real","Date: 2023-09-01<br />Value:  0.30000000<br />Model: Real","Date: 2023-10-01<br />Value: -0.50000000<br />Model: Real","Date: 2023-11-01<br />Value: -1.00000000<br />Model: Real","Date: 2023-12-01<br />Value: -1.40000000<br />Model: Real"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"Real","legendgroup":"Real","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-0.39927117506479526,-0.54180990245099703,-0.30517999042114707,-0.27961202950269842,-0.34855676864132645,-0.23110896997995545,-0.19824586651335208,-0.22801719652483796,-0.16859530880669527,-0.14102666627780633,-0.15142606358113089,-0.1203631618661638],"text":["Date: 2023-01-01<br />Value: -0.39927118<br />Model: SSARIMA","Date: 2023-02-01<br />Value: -0.54180990<br />Model: SSARIMA","Date: 2023-03-01<br />Value: -0.30517999<br />Model: SSARIMA","Date: 2023-04-01<br />Value: -0.27961203<br />Model: SSARIMA","Date: 2023-05-01<br />Value: -0.34855677<br />Model: SSARIMA","Date: 2023-06-01<br />Value: -0.23110897<br />Model: SSARIMA","Date: 2023-07-01<br />Value: -0.19824587<br />Model: SSARIMA","Date: 2023-08-01<br />Value: -0.22801720<br />Model: SSARIMA","Date: 2023-09-01<br />Value: -0.16859531<br />Model: SSARIMA","Date: 2023-10-01<br />Value: -0.14102667<br />Model: SSARIMA","Date: 2023-11-01<br />Value: -0.15142606<br />Model: SSARIMA","Date: 2023-12-01<br />Value: -0.12036316<br />Model: SSARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,98,188,1)","dash":"solid"},"hoveron":"points","name":"SSARIMA","legendgroup":"SSARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Comparaison des prévisions des modèles avec les données réelles<br />       Jan 2023 à Déc 2023 - série differencié","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19341.299999999999,19708.700000000001],"tickmode":"array","ticktext":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"tickvals":[19358,19448,19539,19631],"categoryorder":"array","categoryarray":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2.1649999999999991,1.4649999999999821],"tickmode":"array","ticktext":["-2","-1","0","1"],"tickvals":[-2,-1,0,1],"categoryorder":"array","categoryarray":["-2","-1","0","1"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Valeur","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Modèle","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e1d71ec9636":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"e1d71ec9636","visdat":{"e1d71ec9636":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="réintégration" class="level3">
<h3 class="anchored" data-anchor-id="réintégration">Réintégration</h3>
<p>Nous pouvons reintegrer les prévisions aux données pour avoir le graphique au niveau</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>dec_2022 <span class="ot">&lt;-</span> <span class="fl">139.6</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>df_real <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Date =</span> forecast_dates,</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">AR1 =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>AR1),</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ARP =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARP),</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ARIMA =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARIMA),</span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">HOLT =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>HOLT),</span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ADAM_ETS =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ADAM_ETS),</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ADAM_ETS_SARIMA =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ADAM_ETS_SARIMA),</span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">SSARIMA =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>SSARIMA),</span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">CES =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>CES)</span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb153-14"><a href="#cb153-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-15"><a href="#cb153-15" aria-hidden="true" tabindex="-1"></a>real_2023 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(real_2023)</span>
<span id="cb153-16"><a href="#cb153-16" aria-hidden="true" tabindex="-1"></a>df_real<span class="sc">$</span>Real <span class="ot">=</span> real_2023</span>
<span id="cb153-17"><a href="#cb153-17" aria-hidden="true" tabindex="-1"></a>df_real</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date      AR1      ARP    ARIMA     HOLT ADAM_ETS ADAM_ETS_SARIMA
1  2023-01-01 138.8333 138.8696 138.9306 139.4810 138.9568        138.9774
2  2023-02-01 138.3644 138.2431 138.3660 139.4027 138.2961        138.6178
3  2023-03-01 138.1030 137.7495 137.8898 139.1209 137.6181        138.3169
4  2023-04-01 137.9861 137.3529 137.4881 138.8786 136.9236        138.1257
5  2023-05-01 137.9699 137.0358 137.1493 138.4517 136.2123        138.0296
6  2023-06-01 138.0238 136.7819 136.8636 138.1019 135.4852        138.0017
7  2023-07-01 138.1266 136.5787 136.6226 137.6429 134.7415        138.0306
8  2023-08-01 138.2634 136.4161 136.4194 137.2340 133.9810        138.1067
9  2023-09-01 138.4240 136.2860 136.2479 137.1719 133.2035        138.2206
10 2023-10-01 138.6010 136.1818 136.1034 136.8711 132.4091        138.3655
11 2023-11-01 138.7896 136.0984 135.9814 136.3246 131.5980        138.5355
12 2023-12-01 138.9862 136.0317 135.8785 135.6699 130.7690        138.7260
    SSARIMA      CES  Real
1  139.2007 139.3564 140.1
2  138.6589 139.3693 138.6
3  138.3537 139.1938 137.5
4  138.0741 139.0305 135.5
5  137.7256 138.7970 133.5
6  137.4945 138.4592 132.0
7  137.2962 138.1714 130.8
8  137.0682 137.8984 132.1
9  136.8996 137.8457 132.4
10 136.7586 137.7236 131.9
11 136.6072 137.3798 130.9
12 136.4868 137.0202 129.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les données en format long</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>df_real_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(df_real, <span class="at">cols =</span> <span class="sc">-</span>Date, <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique plotly</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_real_long, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison des prévisions des modèles avec les données réelles</span></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="st">       Jan 2023 à Déc 2023"</span>,</span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valeur"</span>,</span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Modèle"</span>) <span class="sc">+</span></span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-6898a5261a0bac81c959" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6898a5261a0bac81c959">{"x":{"data":[{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.95675183434588,138.29607048255352,137.61809352876153,136.92357980057557,136.21228268890368,135.48520807914946,134.74148475629943,133.98100930607393,133.20353736376546,132.40913734045046,131.59804104119598,130.7689784412201],"text":["Date: 2023-01-01<br />Value: 138.9568<br />Model: ADAM_ETS","Date: 2023-02-01<br />Value: 138.2961<br />Model: ADAM_ETS","Date: 2023-03-01<br />Value: 137.6181<br />Model: ADAM_ETS","Date: 2023-04-01<br />Value: 136.9236<br />Model: ADAM_ETS","Date: 2023-05-01<br />Value: 136.2123<br />Model: ADAM_ETS","Date: 2023-06-01<br />Value: 135.4852<br />Model: ADAM_ETS","Date: 2023-07-01<br />Value: 134.7415<br />Model: ADAM_ETS","Date: 2023-08-01<br />Value: 133.9810<br />Model: ADAM_ETS","Date: 2023-09-01<br />Value: 133.2035<br />Model: ADAM_ETS","Date: 2023-10-01<br />Value: 132.4091<br />Model: ADAM_ETS","Date: 2023-11-01<br />Value: 131.5980<br />Model: ADAM_ETS","Date: 2023-12-01<br />Value: 130.7690<br />Model: ADAM_ETS"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS","legendgroup":"ADAM_ETS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.97741086331018,138.61782618306842,138.31690305164739,138.12565279225029,138.02962817246936,138.00173503890619,138.03063830706247,138.106659387984,138.22064250788705,138.36548693465403,138.53550029058306,138.72598580125236],"text":["Date: 2023-01-01<br />Value: 138.9774<br />Model: ADAM_ETS_SARIMA","Date: 2023-02-01<br />Value: 138.6178<br />Model: ADAM_ETS_SARIMA","Date: 2023-03-01<br />Value: 138.3169<br />Model: ADAM_ETS_SARIMA","Date: 2023-04-01<br />Value: 138.1257<br />Model: ADAM_ETS_SARIMA","Date: 2023-05-01<br />Value: 138.0296<br />Model: ADAM_ETS_SARIMA","Date: 2023-06-01<br />Value: 138.0017<br />Model: ADAM_ETS_SARIMA","Date: 2023-07-01<br />Value: 138.0306<br />Model: ADAM_ETS_SARIMA","Date: 2023-08-01<br />Value: 138.1067<br />Model: ADAM_ETS_SARIMA","Date: 2023-09-01<br />Value: 138.2206<br />Model: ADAM_ETS_SARIMA","Date: 2023-10-01<br />Value: 138.3655<br />Model: ADAM_ETS_SARIMA","Date: 2023-11-01<br />Value: 138.5355<br />Model: ADAM_ETS_SARIMA","Date: 2023-12-01<br />Value: 138.7260<br />Model: ADAM_ETS_SARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(211,146,0,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS_SARIMA","legendgroup":"ADAM_ETS_SARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.83327290112757,138.36437798926244,138.10295930613262,137.98607297164776,137.96987094173198,138.02380773735666,138.12660472891005,138.26343877095292,138.42398374546346,138.6010462592555,138.78961524181628,138.98619987496934],"text":["Date: 2023-01-01<br />Value: 138.8333<br />Model: AR1","Date: 2023-02-01<br />Value: 138.3644<br />Model: AR1","Date: 2023-03-01<br />Value: 138.1030<br />Model: AR1","Date: 2023-04-01<br />Value: 137.9861<br />Model: AR1","Date: 2023-05-01<br />Value: 137.9699<br />Model: AR1","Date: 2023-06-01<br />Value: 138.0238<br />Model: AR1","Date: 2023-07-01<br />Value: 138.1266<br />Model: AR1","Date: 2023-08-01<br />Value: 138.2634<br />Model: AR1","Date: 2023-09-01<br />Value: 138.4240<br />Model: AR1","Date: 2023-10-01<br />Value: 138.6010<br />Model: AR1","Date: 2023-11-01<br />Value: 138.7896<br />Model: AR1","Date: 2023-12-01<br />Value: 138.9862<br />Model: AR1"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(147,170,0,1)","dash":"solid"},"hoveron":"points","name":"AR1","legendgroup":"AR1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.93057568943308,138.36596353902002,137.8897530468673,137.48810311306684,137.1493397469078,136.86361676130807,136.62262959251927,136.41937392724984,136.24794212168214,136.10335149528433,135.98139950876194,135.87854161688279],"text":["Date: 2023-01-01<br />Value: 138.9306<br />Model: ARIMA","Date: 2023-02-01<br />Value: 138.3660<br />Model: ARIMA","Date: 2023-03-01<br />Value: 137.8898<br />Model: ARIMA","Date: 2023-04-01<br />Value: 137.4881<br />Model: ARIMA","Date: 2023-05-01<br />Value: 137.1493<br />Model: ARIMA","Date: 2023-06-01<br />Value: 136.8636<br />Model: ARIMA","Date: 2023-07-01<br />Value: 136.6226<br />Model: ARIMA","Date: 2023-08-01<br />Value: 136.4194<br />Model: ARIMA","Date: 2023-09-01<br />Value: 136.2479<br />Model: ARIMA","Date: 2023-10-01<br />Value: 136.1034<br />Model: ARIMA","Date: 2023-11-01<br />Value: 135.9814<br />Model: ARIMA","Date: 2023-12-01<br />Value: 135.8785<br />Model: ARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"ARIMA","legendgroup":"ARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.86962119103151,138.24310446360499,137.7494570115939,137.35290297418007,137.03578092832069,136.7819141800378,136.57873492446848,136.41611359599094,136.28595587715046,136.18178083598207,136.09840175108923,136.03166721594576],"text":["Date: 2023-01-01<br />Value: 138.8696<br />Model: ARP","Date: 2023-02-01<br />Value: 138.2431<br />Model: ARP","Date: 2023-03-01<br />Value: 137.7495<br />Model: ARP","Date: 2023-04-01<br />Value: 137.3529<br />Model: ARP","Date: 2023-05-01<br />Value: 137.0358<br />Model: ARP","Date: 2023-06-01<br />Value: 136.7819<br />Model: ARP","Date: 2023-07-01<br />Value: 136.5787<br />Model: ARP","Date: 2023-08-01<br />Value: 136.4161<br />Model: ARP","Date: 2023-09-01<br />Value: 136.2860<br />Model: ARP","Date: 2023-10-01<br />Value: 136.1818<br />Model: ARP","Date: 2023-11-01<br />Value: 136.0984<br />Model: ARP","Date: 2023-12-01<br />Value: 136.0317<br />Model: ARP"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,193,159,1)","dash":"solid"},"hoveron":"points","name":"ARP","legendgroup":"ARP","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[139.35639393030573,139.36934434104447,139.19379055375171,139.03047113154528,138.79704682274206,138.4591540773848,138.17143790747957,137.89836544351098,137.84567114407849,137.72362528750006,137.37976520135217,137.02023720462711],"text":["Date: 2023-01-01<br />Value: 139.3564<br />Model: CES","Date: 2023-02-01<br />Value: 139.3693<br />Model: CES","Date: 2023-03-01<br />Value: 139.1938<br />Model: CES","Date: 2023-04-01<br />Value: 139.0305<br />Model: CES","Date: 2023-05-01<br />Value: 138.7970<br />Model: CES","Date: 2023-06-01<br />Value: 138.4592<br />Model: CES","Date: 2023-07-01<br />Value: 138.1714<br />Model: CES","Date: 2023-08-01<br />Value: 137.8984<br />Model: CES","Date: 2023-09-01<br />Value: 137.8457<br />Model: CES","Date: 2023-10-01<br />Value: 137.7236<br />Model: CES","Date: 2023-11-01<br />Value: 137.3798<br />Model: CES","Date: 2023-12-01<br />Value: 137.0202<br />Model: CES"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,185,227,1)","dash":"solid"},"hoveron":"points","name":"CES","legendgroup":"CES","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[139.48100953560149,139.40274625404024,139.12089765520324,138.87857042211871,138.45172648034864,138.10192239976104,137.64294139401622,137.23395818790095,137.17194751336626,136.87109376610104,136.324595860984,135.66993822772804],"text":["Date: 2023-01-01<br />Value: 139.4810<br />Model: HOLT","Date: 2023-02-01<br />Value: 139.4027<br />Model: HOLT","Date: 2023-03-01<br />Value: 139.1209<br />Model: HOLT","Date: 2023-04-01<br />Value: 138.8786<br />Model: HOLT","Date: 2023-05-01<br />Value: 138.4517<br />Model: HOLT","Date: 2023-06-01<br />Value: 138.1019<br />Model: HOLT","Date: 2023-07-01<br />Value: 137.6429<br />Model: HOLT","Date: 2023-08-01<br />Value: 137.2340<br />Model: HOLT","Date: 2023-09-01<br />Value: 137.1719<br />Model: HOLT","Date: 2023-10-01<br />Value: 136.8711<br />Model: HOLT","Date: 2023-11-01<br />Value: 136.3246<br />Model: HOLT","Date: 2023-12-01<br />Value: 135.6699<br />Model: HOLT"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"HOLT","legendgroup":"HOLT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[140.09999999999999,138.59999999999999,137.5,135.5,133.5,132,130.80000000000001,132.09999999999999,132.40000000000001,131.90000000000001,130.90000000000001,129.5],"text":["Date: 2023-01-01<br />Value: 140.1000<br />Model: Real","Date: 2023-02-01<br />Value: 138.6000<br />Model: Real","Date: 2023-03-01<br />Value: 137.5000<br />Model: Real","Date: 2023-04-01<br />Value: 135.5000<br />Model: Real","Date: 2023-05-01<br />Value: 133.5000<br />Model: Real","Date: 2023-06-01<br />Value: 132.0000<br />Model: Real","Date: 2023-07-01<br />Value: 130.8000<br />Model: Real","Date: 2023-08-01<br />Value: 132.1000<br />Model: Real","Date: 2023-09-01<br />Value: 132.4000<br />Model: Real","Date: 2023-10-01<br />Value: 131.9000<br />Model: Real","Date: 2023-11-01<br />Value: 130.9000<br />Model: Real","Date: 2023-12-01<br />Value: 129.5000<br />Model: Real"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(219,114,251,1)","dash":"solid"},"hoveron":"points","name":"Real","legendgroup":"Real","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[139.2007288249352,138.65891892248419,138.35373893206307,138.07412690256035,137.72557013391904,137.49446116393906,137.29621529742573,137.06819810090087,136.89960279209419,136.75857612581638,136.60715006223526,136.48678690036908],"text":["Date: 2023-01-01<br />Value: 139.2007<br />Model: SSARIMA","Date: 2023-02-01<br />Value: 138.6589<br />Model: SSARIMA","Date: 2023-03-01<br />Value: 138.3537<br />Model: SSARIMA","Date: 2023-04-01<br />Value: 138.0741<br />Model: SSARIMA","Date: 2023-05-01<br />Value: 137.7256<br />Model: SSARIMA","Date: 2023-06-01<br />Value: 137.4945<br />Model: SSARIMA","Date: 2023-07-01<br />Value: 137.2962<br />Model: SSARIMA","Date: 2023-08-01<br />Value: 137.0682<br />Model: SSARIMA","Date: 2023-09-01<br />Value: 136.8996<br />Model: SSARIMA","Date: 2023-10-01<br />Value: 136.7586<br />Model: SSARIMA","Date: 2023-11-01<br />Value: 136.6072<br />Model: SSARIMA","Date: 2023-12-01<br />Value: 136.4868<br />Model: SSARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,97,195,1)","dash":"solid"},"hoveron":"points","name":"SSARIMA","legendgroup":"SSARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Comparaison des prévisions des modèles avec les données réelles<br />       Jan 2023 à Déc 2023","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19341.299999999999,19708.700000000001],"tickmode":"array","ticktext":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"tickvals":[19358,19448,19539,19631],"categoryorder":"array","categoryarray":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[128.97,140.63],"tickmode":"array","ticktext":["129","132","135","138"],"tickvals":[129,132,135,138],"categoryorder":"array","categoryarray":["129","132","135","138"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Valeur","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Modèle","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e1d4e8cd11e":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"e1d4e8cd11e","visdat":{"e1d4e8cd11e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
</section>
<section id="qualite-de-prevision" class="level1">
<h1>Qualité de prévision</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Erreur de prévision , comparatif entre la valeur predicte de chaque modele et la valeur real </span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">names</span>(df)[<span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(df) <span class="sc">==</span> <span class="st">"Date"</span> <span class="sc">|</span> <span class="fu">names</span>(df) <span class="sc">==</span> <span class="st">"Real"</span>)]</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculer l'erreur pour chaque modèle</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a>errors_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> df<span class="sc">$</span>Date)  <span class="co"># nouveau dataframe pour stocker les erreurs</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models) {</span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>  errors_df[[model]] <span class="ot">&lt;-</span> df[[model]] <span class="sc">-</span> df<span class="sc">$</span>Real</span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a>errors_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date        AR1        ARP      ARIMA       HOLT   ADAM_ETS
1  2023-01-01 -1.2667271 -1.2303788 -1.1694243 -0.6189905 -1.1432482
2  2023-02-01  1.0311051  0.8734833  0.9353878  1.4217367  0.8393186
3  2023-03-01  0.8385813  0.6063525  0.6237895  0.8181514  0.4220230
4  2023-04-01  1.8831137  1.6034460  1.5983501  1.7576728  1.3054863
5  2023-05-01  1.9837980  1.6828780  1.6612366  1.5731561  1.2887029
6  2023-06-01  1.5539368  1.2461333  1.2142770  1.1501959  0.7729254
7  2023-07-01  1.3027970  0.9968207  0.9590128  0.7410190  0.4562767
8  2023-08-01 -1.1631660 -1.4626213 -1.5032557 -1.7089832 -2.0604755
9  2023-09-01 -0.1394550 -0.4301577 -0.4714318 -0.3620107 -1.0774719
10 2023-10-01  0.6770625  0.3958250  0.3554094  0.1991463 -0.2944000
11 2023-11-01  1.1885690  0.9166209  0.8780480  0.4535021  0.1889037
12 2023-12-01  1.5965846  1.3332655  1.2971421  0.7453424  0.5709374
   ADAM_ETS_SARIMA    SSARIMA        CES       NAIVE
1       -1.1225891 -0.8992712 -0.7436061 -1.69426529
2        1.1404153  0.9581901  1.5129504  0.30573471
3        0.7990769  0.7948200  0.9244462 -0.09426529
4        1.8087497  1.7203880  1.8366806  0.80573471
5        1.9039754  1.6514432  1.7665757  0.80573471
6        1.4721069  1.2688910  1.1621073  0.30573471
7        1.2289033  1.0017541  0.9122838  0.00573471
8       -1.2239789 -1.5280172 -1.5730725 -2.49426529
9       -0.1860169 -0.4685953 -0.3526943 -1.49426529
10       0.6448444  0.3589733  0.3779541 -0.69426529
11       1.1700134  0.8485739  0.6561399 -0.19426529
12       1.5904855  1.2796368  1.0404720  0.20573471</code></pre>
</div>
</div>
<section id="cspe-somme-cumulative-des-erreurs-pour-chaque-modèle-et-graphique" class="level3">
<h3 class="anchored" data-anchor-id="cspe-somme-cumulative-des-erreurs-pour-chaque-modèle-et-graphique">CSPE somme cumulative des erreurs pour chaque modèle et graphique</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># errors_df contienne déjà les erreurs pour chaque modèle calculées comme précédemment</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>cspe_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> df<span class="sc">$</span>Date)  <span class="co">#  nouveau dataframe pour stocker le CSPE</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models) {</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>  cspe_df[[model]] <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(errors_df[[model]])  <span class="co"># Calcul du CSPE </span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>cspe_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date        AR1        ARP      ARIMA       HOLT   ADAM_ETS
1  2023-01-01 -1.2667271 -1.2303788 -1.1694243 -0.6189905 -1.1432482
2  2023-02-01 -0.2356220 -0.3568955 -0.2340365  0.8027463 -0.3039295
3  2023-03-01  0.6029593  0.2494570  0.3897530  1.6208977  0.1180935
4  2023-04-01  2.4860730  1.8529030  1.9881031  3.3785704  1.4235798
5  2023-05-01  4.4698709  3.5357809  3.6493397  4.9517265  2.7122827
6  2023-06-01  6.0238077  4.7819142  4.8636168  6.1019224  3.4852081
7  2023-07-01  7.3266047  5.7787349  5.8226296  6.8429414  3.9414848
8  2023-08-01  6.1634388  4.3161136  4.3193739  5.1339582  1.8810093
9  2023-09-01  6.0239837  3.8859559  3.8479421  4.7719475  0.8035374
10 2023-10-01  6.7010463  4.2817808  4.2033515  4.9710938  0.5091373
11 2023-11-01  7.8896152  5.1984018  5.0813995  5.4245959  0.6980410
12 2023-12-01  9.4861999  6.5316672  6.3785416  6.1699382  1.2689784
   ADAM_ETS_SARIMA     SSARIMA        CES      NAIVE
1      -1.12258914 -0.89927118 -0.7436061 -1.6942653
2       0.01782618  0.05891892  0.7693443 -1.3885306
3       0.81690305  0.85373893  1.6937906 -1.4827959
4       2.62565279  2.57412690  3.5304711 -0.6770612
5       4.52962817  4.22557013  5.2970468  0.1286735
6       6.00173504  5.49446116  6.4591541  0.4344083
7       7.23063831  6.49621530  7.3714379  0.4401430
8       6.00665939  4.96819810  5.7983654 -2.0541223
9       5.82064251  4.49960279  5.4456711 -3.5483876
10      6.46548693  4.85857613  5.8236253 -4.2426529
11      7.63550029  5.70715006  6.4797652 -4.4369182
12      9.22598580  6.98678690  7.5202372 -4.2311835</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  on pivot cspe_df pour l'utiliser avec ggplot2</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>cspe_long <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(cspe_df, <span class="at">cols =</span> <span class="sc">-</span>Date, <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"CSPE"</span>)</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cspe_long, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> CSPE, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative Sum of Prediction Errors (CSPE) pour chaque modèle"</span>,</span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"CSPE"</span>) <span class="sc">+</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calcul-du-r2oos-pour-chaque-modèle" class="level3">
<h3 class="anchored" data-anchor-id="calcul-du-r2oos-pour-chaque-modèle">Calcul du R2OOS pour chaque modèle</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>calculate_r2oos <span class="ot">&lt;-</span> <span class="cf">function</span>(actual, predicted, naive_predictions) {</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  ss_res <span class="ot">&lt;-</span> <span class="fu">sum</span>((actual <span class="sc">-</span> predicted)<span class="sc">^</span><span class="dv">2</span>)  <span class="co"># Somme des carrés des erreurs de prédiction</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  ss_tot <span class="ot">&lt;-</span> <span class="fu">sum</span>((actual <span class="sc">-</span> naive_predictions)<span class="sc">^</span><span class="dv">2</span>)  <span class="co"># Somme des carrés des erreurs du modèle naïf</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  r2_oos <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> ss_res <span class="sc">/</span> ss_tot</span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(r2_oos)</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame pour stocker le R^2 OOS de chaque modèle</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>r2oos_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">R2OOS =</span> <span class="fu">numeric</span>())</span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a><span class="co"># R^2 OOS pour chaque modèle, avec modèle naïf comme référence</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(df), <span class="fu">c</span>(<span class="st">"Date"</span>, <span class="st">"Real"</span>, <span class="st">"NAIVE"</span>))  <span class="co"># Exclure Date, Real, et NAIVE de la liste des modèles</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models) {</span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>  r2oos_value <span class="ot">&lt;-</span> <span class="fu">calculate_r2oos</span>(df<span class="sc">$</span>Real, df[[model]], df<span class="sc">$</span>NAIVE)</span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>  r2oos_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(r2oos_df, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">R2OOS =</span> r2oos_value))</span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a>r2oos_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Model       R2OOS
1             AR1 -0.55123249
2             ARP -0.17276444
3           ARIMA -0.15103662
4            HOLT -0.07335788
5        ADAM_ETS  0.08713937
6 ADAM_ETS_SARIMA -0.46627994
7         SSARIMA -0.17329720
8             CES -0.24268116</code></pre>
</div>
</div>
</section>
<section id="calcul-du-mse-pour-chaque-modèle" class="level3">
<h3 class="anchored" data-anchor-id="calcul-du-mse-pour-chaque-modèle">Calcul du MSE pour chaque modèle</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataFrame pour stocker le MSE de chaque modèle</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>mse_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">MSE =</span> <span class="fu">numeric</span>())</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models) {</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>  mse_value <span class="ot">&lt;-</span> <span class="fu">mean</span>((errors_df[[model]])<span class="sc">^</span><span class="dv">2</span>)  <span class="co"># Calcul du MSE</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>  mse_df <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mse_df, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">MSE =</span> mse_value))</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>mse_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Model      MSE
1             AR1 1.729763
2             ARP 1.307738
3           ARIMA 1.283509
4            HOLT 1.196890
5        ADAM_ETS 1.017921
6 ADAM_ETS_SARIMA 1.635034
7         SSARIMA 1.308332
8             CES 1.385701</code></pre>
</div>
</div>
</section>
<section id="dm-test" class="level3">
<h3 class="anchored" data-anchor-id="dm-test">DM test</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame pour stocker les résultats du </span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>dm_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">DM_Statistic =</span> <span class="fu">numeric</span>(), <span class="at">P_Value =</span> <span class="fu">numeric</span>(), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DM test pour chaque modèle comparé au modèle naïf</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> <span class="fu">setdiff</span>(models, <span class="st">"NAIVE"</span>)) {</span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>  dm_test_result <span class="ot">&lt;-</span> <span class="fu">dm.test</span>(errors_df<span class="sc">$</span>NAIVE, errors_df[[model]], <span class="at">alternative =</span> <span class="st">"less"</span>)</span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  résultats</span></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a>dm_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(dm_results, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">DM_Statistic =</span> dm_test_result<span class="sc">$</span>statistic, <span class="at">P_Value =</span> dm_test_result<span class="sc">$</span>p.value))}</span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a>dm_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Model DM_Statistic   P_Value
DM              AR1   -0.8916720 0.1958281
DM1             ARP   -0.3582740 0.3634595
DM2           ARIMA   -0.3198306 0.3775446
DM3            HOLT   -0.1541724 0.4401330
DM4        ADAM_ETS    0.3452391 0.6317870
DM5 ADAM_ETS_SARIMA   -0.7802244 0.2258607
DM6         SSARIMA   -0.3504809 0.3662986
DM7             CES   -0.4600823 0.3272090</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">dm.test</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accuracy" class="level3">
<h3 class="anchored" data-anchor-id="accuracy">Accuracy</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframe pour stocker les résultats d'accuracy</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>accuracy_results <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), </span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ME =</span> <span class="fu">numeric</span>(), </span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">RMSE =</span> <span class="fu">numeric</span>(), </span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">MAE =</span> <span class="fu">numeric</span>(), </span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>                               <span class="at">MPE =</span> <span class="fu">numeric</span>(),</span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>                               <span class="at">MAPE =</span> <span class="fu">numeric</span>())</span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(df), <span class="fu">c</span>(<span class="st">"Real"</span>, <span class="st">"Date"</span>))  </span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul de l'accuracy pour chaque modèle</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models) { acc <span class="ot">&lt;-</span> <span class="fu">accuracy</span>(df[[model]], df<span class="sc">$</span>Real)</span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="co">#  résultats au dataframe des résultats</span></span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>accuracy_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(accuracy_results, <span class="fu">data.frame</span>(<span class="at">Model =</span> model,<span class="at">ME =</span> acc[<span class="dv">1</span>, <span class="st">"ME"</span>], <span class="at">RMSE =</span> acc[<span class="dv">1</span>, <span class="st">"RMSE"</span>],<span class="at">MAE =</span> acc[<span class="dv">1</span>, <span class="st">"MAE"</span>], <span class="at">MPE =</span> acc[<span class="dv">1</span>, <span class="st">"MPE"</span>], <span class="at">APE =</span> acc[<span class="dv">1</span>, <span class="st">"MAPE"</span>]))</span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true" tabindex="-1"></a>accuracy_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Model         ME     RMSE       MAE       MPE       APE
1             AR1 -0.7905167 1.315205 1.2187413 109.00822 109.00822
2             ARP -0.5443056 1.143564 1.0648319 100.98722 100.98722
3           ARIMA -0.5315451 1.132921 1.0555638 100.09331 100.09331
4            HOLT -0.5141615 1.094025 0.9624922  82.37328  82.37328
5        ADAM_ETS -0.1057482 1.008921 0.8683475  88.38982  98.20315
6 ADAM_ETS_SARIMA -0.7688322 1.278684 1.1909296 106.25903 106.25903
7         SSARIMA -0.5822322 1.143823 1.0648795  97.87055  97.87055
8             CES -0.6266864 1.177158 1.0715819  93.44833  93.44833
9           NAIVE  0.3525986 1.055978 0.7583333  83.20585 111.01404</code></pre>
</div>
</div>
</section>
<section id="estimation-de-modeles-série-corrigé-non-stationnaire" class="level2">
<h2 class="anchored" data-anchor-id="estimation-de-modeles-série-corrigé-non-stationnaire">Estimation de modeles série corrigé (non stationnaire)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co">#lissage exponentiel double (Holt-Winters sans composante saisonnière)</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>hw2 <span class="ot">&lt;-</span> <span class="fu">HoltWinters</span>(ipampa, <span class="at">gamma =</span> <span class="cn">FALSE</span>)</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>forecast_hw2 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(hw2, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ADAM ETS</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(ipampa, <span class="at">model=</span><span class="st">"ZZN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">select=</span><span class="cn">TRUE</span>)</span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>forecast_ae2 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ae2, <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a>forecast_ae2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2023 126.7827 126.2061 125.7241 125.3410 125.0289 124.7638 124.5520 124.3797
          Sep      Oct      Nov      Dec
2023 124.2318 124.1225 124.0340 123.9569</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ADAM ETS+ARIMA </span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>aea2 <span class="ot">&lt;-</span> <span class="fu">auto.adam</span>(ipampa, <span class="at">model=</span><span class="st">"ZZN"</span>, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span>(<span class="dv">2</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>))</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>forecast_aea2 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(aea2 , <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>forecast_aea2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2023 126.7636 126.1681 125.6880 125.2948 124.9711 124.7042 124.4836 124.3059
          Sep      Oct      Nov      Dec
2023 124.1553 124.0212 123.9137 123.8230</code></pre>
</div>
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SSARIMA</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>ssarima2 <span class="ot">&lt;-</span> <span class="fu">auto.ssarima</span>(ipampa, <span class="at">lags=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">12</span>), <span class="at">orders=</span><span class="fu">list</span>(<span class="at">ar=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">i=</span>(<span class="dv">2</span>), <span class="at">ma=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">select=</span><span class="cn">TRUE</span>))</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>forecast_ssarima2 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ssarima2 , <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>forecast_ssarima2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Point forecast Lower bound (2.5%) Upper bound (97.5%)
Jan 2023       126.8350           125.7776            127.8923
Feb 2023       126.3923           124.3689            128.4157
Mar 2023       125.9496           122.9206            128.9786
Apr 2023       125.5069           121.3936            129.6203
May 2023       125.0643           119.7833            130.3452
Jun 2023       124.6216           118.0916            131.1516
Jul 2023       124.1789           116.3217            132.0361
Aug 2023       123.7362           114.4770            132.9955
Sep 2023       123.2935           112.5607            134.0264
Oct 2023       122.8508           110.5759            135.1258
Nov 2023       122.4082           108.5252            136.2912
Dec 2023       121.9655           106.4110            137.5199</code></pre>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ces</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>ces2 <span class="ot">&lt;-</span> <span class="fu">auto.ces</span>(ipampa, <span class="at">models=</span><span class="fu">c</span>(<span class="st">"n"</span>, <span class="st">"s"</span>, <span class="st">"p"</span>, <span class="st">"f"</span>), <span class="at">ic=</span><span class="st">"AICc"</span>)</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>forecast_ces2 <span class="ot">&lt;-</span> <span class="fu">forecast</span>(ces2 , <span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>forecast_ces2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Point forecast Lower bound (2.5%) Upper bound (97.5%)
Jan 2023       128.0169           126.6153            129.4185
Feb 2023       128.4711           126.4840            130.4581
Mar 2023       128.9841           126.5364            131.4319
Apr 2023       129.2816           126.4542            132.1091
May 2023       129.6860           126.5145            132.8574
Jun 2023       129.7981           126.3225            133.2738
Jul 2023       129.9620           126.1984            133.7255
Aug 2023       130.1308           126.1051            134.1564
Sep 2023       130.6903           126.4112            134.9694
Oct 2023       130.9689           126.4554            135.4824
Nov 2023       131.2151           126.4719            135.9583
Dec 2023       131.2254           126.2677            136.1830</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Naive model</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>forecast_naive2 <span class="ot">&lt;-</span> <span class="fu">naive</span>(ipampa,<span class="at">h=</span><span class="dv">12</span>)</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>forecast_naive2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
Jan 2023       127.4637 126.4812 128.4461 125.9611 128.9662
Feb 2023       127.4637 126.0743 128.8530 125.3388 129.5885
Mar 2023       127.4637 125.7620 129.1653 124.8612 130.0661
Apr 2023       127.4637 125.4988 129.4285 124.4586 130.4687
May 2023       127.4637 125.2668 129.6605 124.1039 130.8234
Jun 2023       127.4637 125.0572 129.8702 123.7832 131.1441
Jul 2023       127.4637 124.8643 130.0630 123.4883 131.4390
Aug 2023       127.4637 124.6849 130.2424 123.2139 131.7134
Sep 2023       127.4637 124.5163 130.4110 122.9561 131.9712
Oct 2023       127.4637 124.3569 130.5704 122.7122 132.2151
Nov 2023       127.4637 124.2052 130.7221 122.4803 132.4470
Dec 2023       127.4637 124.0603 130.8670 122.2587 132.6686</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>ipampa</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2005  78.2000  78.5000  79.1000  79.3000  78.9000  79.4000  79.8000  80.0000
2006  80.8000  81.1000  81.3000  81.8000  81.8000  81.8000  81.9000  82.1000
2007  82.6000  83.1000  83.8000  84.5000  84.8000  85.1000  85.8000  86.6000
2008  93.2000  94.4000  95.7000  96.9000  98.8000 100.2000 101.3000 100.6000
2009  95.4000  94.8000  93.9000  93.5000  92.7000  92.2000  90.8000  90.7000
2010  89.5000  89.8000  90.4000  91.0000  91.2000  91.4000  91.3000  92.1000
2011  98.0000  99.4000 100.6000 101.0000 100.4000 100.6000 101.0000 100.9000
2012 100.6000 101.2000 101.9000 102.3000 102.3000 101.8000 103.1000 105.1000
2013 106.4000 106.8000 106.4000 105.7000 105.4000 105.0000 104.6000 104.2000
2014 102.9000 103.0000 103.1000 103.3000 103.3000 103.1000 102.5000 102.1000
2015  99.1000  98.9605  99.1605  99.5605  99.7605  99.0605  98.6605  98.1605
2016  96.2605  95.9605  96.0605  95.8605  96.3605  96.2605  95.7605  95.3605
2017  97.0605  97.4605  97.3605  97.5605  97.1605  96.5605  96.3605  96.4605
2018  98.5605  98.5605  98.8605  99.5605 100.4605 100.3605 100.6605 101.1605
2019 102.0605 102.5605 102.8605 103.0605 102.8605 102.2605 102.1605 101.7605
2020 102.0605 101.8605 100.7605 100.1605 100.1605 100.2605 100.2605 100.2605
2021 102.9605 104.8605 106.0605 106.3605 106.9605 108.0605 109.3605 110.0605
2022 118.8184 120.6184 122.2437 123.6437 125.1437 127.6437 127.2437 127.9437
          Sep      Oct      Nov      Dec
2005  80.5000  80.7000  80.3000  80.4000
2006  81.9000  82.1000  82.3000  82.5000
2007  88.1000  89.5000  91.1000  91.9000
2008 100.6000  99.5000  97.7000  95.8000
2009  90.1000  89.7000  89.4000  89.3000
2010  93.7000  95.0000  95.6000  96.6000
2011 101.3000 101.3000 101.2000 101.0000
2012 106.0000 106.5000 106.4000 106.3000
2013 103.7000 103.0000 102.7000 102.7000
2014 101.6000 101.0000 100.4000  99.5000
2015  98.0605  97.9605  97.7605  96.7605
2016  95.4605  95.8605  95.6605  96.7605
2017  96.8605  97.3605  97.6605  97.7605
2018 102.0605 103.0605 102.9605 102.2605
2019 102.1605 102.0605 101.7605 101.9605
2020  99.9605 100.5605 101.0605 101.5605
2021 111.6605 113.2184 115.2184 116.2184
2022 128.5437 128.6354 128.6579 127.4637</code></pre>
</div>
</div>
<section id="récuperation-des-previsions" class="level3">
<h3 class="anchored" data-anchor-id="récuperation-des-previsions">Récuperation des previsions</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Récupération des "points forecastes" dans un seul dataframe</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a>start_date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>) <span class="co"># La date de début des prévisions</span></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>forecast_horizon <span class="ot">&lt;-</span> <span class="dv">12</span> <span class="co"># Le nombre de mois à prévoir</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="co"># séquence de dates pour les prévisions</span></span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>forecast_dates <span class="ot">&lt;-</span> <span class="fu">seq</span>(start_date, <span class="at">by =</span> <span class="st">"month"</span>, <span class="at">length.out =</span> forecast_horizon)</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  data frames avec les dates et les previsions</span></span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date =</span> forecast_dates,</span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">AR1 =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>AR1),</span>
<span id="cb182-12"><a href="#cb182-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARP =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARP),</span>
<span id="cb182-13"><a href="#cb182-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARIMA =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARIMA),</span>
<span id="cb182-14"><a href="#cb182-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">HOLT_WINTER =</span> <span class="fu">as.numeric</span>(forecast_hw2<span class="sc">$</span>mean),</span>
<span id="cb182-15"><a href="#cb182-15" aria-hidden="true" tabindex="-1"></a> <span class="at">ADAM_ETS =</span> <span class="fu">as.numeric</span>(forecast_ae2<span class="sc">$</span>mean),</span>
<span id="cb182-16"><a href="#cb182-16" aria-hidden="true" tabindex="-1"></a> <span class="at">ADAM_ETS_SARIMA =</span> <span class="fu">as.numeric</span>(forecast_aea2<span class="sc">$</span>mean),</span>
<span id="cb182-17"><a href="#cb182-17" aria-hidden="true" tabindex="-1"></a> <span class="at">SSARIMA =</span>  <span class="fu">as.numeric</span>(forecast_ssarima2<span class="sc">$</span>mean),</span>
<span id="cb182-18"><a href="#cb182-18" aria-hidden="true" tabindex="-1"></a> <span class="at">CES =</span> <span class="fu">as.numeric</span>(forecast_ces2<span class="sc">$</span>mean),</span>
<span id="cb182-19"><a href="#cb182-19" aria-hidden="true" tabindex="-1"></a> <span class="at">NAIVE =</span> <span class="fu">as.numeric</span>(forecast_naive2<span class="sc">$</span>mean)</span>
<span id="cb182-20"><a href="#cb182-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb182-21"><a href="#cb182-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-22"><a href="#cb182-22" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>Real <span class="ot">=</span> real_2023</span>
<span id="cb182-23"><a href="#cb182-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-24"><a href="#cb182-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-25"><a href="#cb182-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les données en format long</span></span>
<span id="cb182-26"><a href="#cb182-26" aria-hidden="true" tabindex="-1"></a>df_long2 <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(df2, <span class="at">cols =</span> <span class="sc">-</span>Date, <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb182-27"><a href="#cb182-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-28"><a href="#cb182-28" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique plotly</span></span>
<span id="cb182-29"><a href="#cb182-29" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_long2, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb182-30"><a href="#cb182-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb182-31"><a href="#cb182-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb182-32"><a href="#cb182-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison des prévisions des modèles avec les données réelles</span></span>
<span id="cb182-33"><a href="#cb182-33" aria-hidden="true" tabindex="-1"></a><span class="st">       Jan 2023 à Déc 2023 - série corrigée"</span>,</span>
<span id="cb182-34"><a href="#cb182-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb182-35"><a href="#cb182-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valeur"</span>,</span>
<span id="cb182-36"><a href="#cb182-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Modèle"</span>) <span class="sc">+</span></span>
<span id="cb182-37"><a href="#cb182-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span>
<span id="cb182-38"><a href="#cb182-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-39"><a href="#cb182-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-af94a1173e65dccd8f46" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-af94a1173e65dccd8f46">{"x":{"data":[{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.7827028417793,126.20607454587487,125.72409486018451,125.3409706308823,125.02888732923459,124.76382892126996,124.55198444233804,124.37971690957265,124.23177080649579,124.12245806724383,124.0339814812009,123.95690931773184],"text":["Date: 2023-01-01<br />Value: 126.7827<br />Model: ADAM_ETS","Date: 2023-02-01<br />Value: 126.2061<br />Model: ADAM_ETS","Date: 2023-03-01<br />Value: 125.7241<br />Model: ADAM_ETS","Date: 2023-04-01<br />Value: 125.3410<br />Model: ADAM_ETS","Date: 2023-05-01<br />Value: 125.0289<br />Model: ADAM_ETS","Date: 2023-06-01<br />Value: 124.7638<br />Model: ADAM_ETS","Date: 2023-07-01<br />Value: 124.5520<br />Model: ADAM_ETS","Date: 2023-08-01<br />Value: 124.3797<br />Model: ADAM_ETS","Date: 2023-09-01<br />Value: 124.2318<br />Model: ADAM_ETS","Date: 2023-10-01<br />Value: 124.1225<br />Model: ADAM_ETS","Date: 2023-11-01<br />Value: 124.0340<br />Model: ADAM_ETS","Date: 2023-12-01<br />Value: 123.9569<br />Model: ADAM_ETS"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS","legendgroup":"ADAM_ETS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.76359086222905,126.16810374258299,125.68802770389068,125.29480640565559,124.97105425175396,124.70418895609447,124.48364993866689,124.3059002229451,124.15534200776477,124.02123941505525,123.91368691491016,123.82304733742994],"text":["Date: 2023-01-01<br />Value: 126.7636<br />Model: ADAM_ETS_SARIMA","Date: 2023-02-01<br />Value: 126.1681<br />Model: ADAM_ETS_SARIMA","Date: 2023-03-01<br />Value: 125.6880<br />Model: ADAM_ETS_SARIMA","Date: 2023-04-01<br />Value: 125.2948<br />Model: ADAM_ETS_SARIMA","Date: 2023-05-01<br />Value: 124.9711<br />Model: ADAM_ETS_SARIMA","Date: 2023-06-01<br />Value: 124.7042<br />Model: ADAM_ETS_SARIMA","Date: 2023-07-01<br />Value: 124.4836<br />Model: ADAM_ETS_SARIMA","Date: 2023-08-01<br />Value: 124.3059<br />Model: ADAM_ETS_SARIMA","Date: 2023-09-01<br />Value: 124.1553<br />Model: ADAM_ETS_SARIMA","Date: 2023-10-01<br />Value: 124.0212<br />Model: ADAM_ETS_SARIMA","Date: 2023-11-01<br />Value: 123.9137<br />Model: ADAM_ETS_SARIMA","Date: 2023-12-01<br />Value: 123.8230<br />Model: ADAM_ETS_SARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(216,144,0,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS_SARIMA","legendgroup":"ADAM_ETS_SARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.83327290112757,138.36437798926244,138.10295930613262,137.98607297164776,137.96987094173198,138.02380773735666,138.12660472891005,138.26343877095292,138.42398374546346,138.6010462592555,138.78961524181628,138.98619987496934],"text":["Date: 2023-01-01<br />Value: 138.8333<br />Model: AR1","Date: 2023-02-01<br />Value: 138.3644<br />Model: AR1","Date: 2023-03-01<br />Value: 138.1030<br />Model: AR1","Date: 2023-04-01<br />Value: 137.9861<br />Model: AR1","Date: 2023-05-01<br />Value: 137.9699<br />Model: AR1","Date: 2023-06-01<br />Value: 138.0238<br />Model: AR1","Date: 2023-07-01<br />Value: 138.1266<br />Model: AR1","Date: 2023-08-01<br />Value: 138.2634<br />Model: AR1","Date: 2023-09-01<br />Value: 138.4240<br />Model: AR1","Date: 2023-10-01<br />Value: 138.6010<br />Model: AR1","Date: 2023-11-01<br />Value: 138.7896<br />Model: AR1","Date: 2023-12-01<br />Value: 138.9862<br />Model: AR1"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"AR1","legendgroup":"AR1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.93057568943308,138.36596353902002,137.8897530468673,137.48810311306684,137.1493397469078,136.86361676130807,136.62262959251927,136.41937392724984,136.24794212168214,136.10335149528433,135.98139950876194,135.87854161688279],"text":["Date: 2023-01-01<br />Value: 138.9306<br />Model: ARIMA","Date: 2023-02-01<br />Value: 138.3660<br />Model: ARIMA","Date: 2023-03-01<br />Value: 137.8898<br />Model: ARIMA","Date: 2023-04-01<br />Value: 137.4881<br />Model: ARIMA","Date: 2023-05-01<br />Value: 137.1493<br />Model: ARIMA","Date: 2023-06-01<br />Value: 136.8636<br />Model: ARIMA","Date: 2023-07-01<br />Value: 136.6226<br />Model: ARIMA","Date: 2023-08-01<br />Value: 136.4194<br />Model: ARIMA","Date: 2023-09-01<br />Value: 136.2479<br />Model: ARIMA","Date: 2023-10-01<br />Value: 136.1034<br />Model: ARIMA","Date: 2023-11-01<br />Value: 135.9814<br />Model: ARIMA","Date: 2023-12-01<br />Value: 135.8785<br />Model: ARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(57,182,0,1)","dash":"solid"},"hoveron":"points","name":"ARIMA","legendgroup":"ARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[138.86962119103151,138.24310446360499,137.7494570115939,137.35290297418007,137.03578092832069,136.7819141800378,136.57873492446848,136.41611359599094,136.28595587715046,136.18178083598207,136.09840175108923,136.03166721594576],"text":["Date: 2023-01-01<br />Value: 138.8696<br />Model: ARP","Date: 2023-02-01<br />Value: 138.2431<br />Model: ARP","Date: 2023-03-01<br />Value: 137.7495<br />Model: ARP","Date: 2023-04-01<br />Value: 137.3529<br />Model: ARP","Date: 2023-05-01<br />Value: 137.0358<br />Model: ARP","Date: 2023-06-01<br />Value: 136.7819<br />Model: ARP","Date: 2023-07-01<br />Value: 136.5787<br />Model: ARP","Date: 2023-08-01<br />Value: 136.4161<br />Model: ARP","Date: 2023-09-01<br />Value: 136.2860<br />Model: ARP","Date: 2023-10-01<br />Value: 136.1818<br />Model: ARP","Date: 2023-11-01<br />Value: 136.0984<br />Model: ARP","Date: 2023-12-01<br />Value: 136.0317<br />Model: ARP"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"ARP","legendgroup":"ARP","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[128.01688513962125,128.47105590132705,128.98413585808899,129.28164948863139,129.68595222021733,129.79812923520524,129.96197293225785,130.13075369227104,130.69027114808469,130.96887396444532,131.21507834577574,131.22535533285426],"text":["Date: 2023-01-01<br />Value: 128.0169<br />Model: CES","Date: 2023-02-01<br />Value: 128.4711<br />Model: CES","Date: 2023-03-01<br />Value: 128.9841<br />Model: CES","Date: 2023-04-01<br />Value: 129.2816<br />Model: CES","Date: 2023-05-01<br />Value: 129.6860<br />Model: CES","Date: 2023-06-01<br />Value: 129.7981<br />Model: CES","Date: 2023-07-01<br />Value: 129.9620<br />Model: CES","Date: 2023-08-01<br />Value: 130.1308<br />Model: CES","Date: 2023-09-01<br />Value: 130.6903<br />Model: CES","Date: 2023-10-01<br />Value: 130.9689<br />Model: CES","Date: 2023-11-01<br />Value: 131.2151<br />Model: CES","Date: 2023-12-01<br />Value: 131.2254<br />Model: CES"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"CES","legendgroup":"CES","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.82526681655629,126.18688293977925,125.54849906300223,124.9101151862252,124.27173130944816,123.63334743267113,122.99496355589409,122.35657967911706,121.71819580234003,121.07981192556299,120.44142804878597,119.80304417200892],"text":["Date: 2023-01-01<br />Value: 126.8253<br />Model: HOLT_WINTER","Date: 2023-02-01<br />Value: 126.1869<br />Model: HOLT_WINTER","Date: 2023-03-01<br />Value: 125.5485<br />Model: HOLT_WINTER","Date: 2023-04-01<br />Value: 124.9101<br />Model: HOLT_WINTER","Date: 2023-05-01<br />Value: 124.2717<br />Model: HOLT_WINTER","Date: 2023-06-01<br />Value: 123.6333<br />Model: HOLT_WINTER","Date: 2023-07-01<br />Value: 122.9950<br />Model: HOLT_WINTER","Date: 2023-08-01<br />Value: 122.3566<br />Model: HOLT_WINTER","Date: 2023-09-01<br />Value: 121.7182<br />Model: HOLT_WINTER","Date: 2023-10-01<br />Value: 121.0798<br />Model: HOLT_WINTER","Date: 2023-11-01<br />Value: 120.4414<br />Model: HOLT_WINTER","Date: 2023-12-01<br />Value: 119.8030<br />Model: HOLT_WINTER"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"HOLT_WINTER","legendgroup":"HOLT_WINTER","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332],"text":["Date: 2023-01-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-02-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-03-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-04-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-05-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-06-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-07-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-08-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-09-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-10-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-11-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-12-01<br />Value: 127.4637<br />Model: NAIVE"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(149,144,255,1)","dash":"solid"},"hoveron":"points","name":"NAIVE","legendgroup":"NAIVE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[140.09999999999999,138.59999999999999,137.5,135.5,133.5,132,130.80000000000001,132.09999999999999,132.40000000000001,131.90000000000001,130.90000000000001,129.5],"text":["Date: 2023-01-01<br />Value: 140.1000<br />Model: Real","Date: 2023-02-01<br />Value: 138.6000<br />Model: Real","Date: 2023-03-01<br />Value: 137.5000<br />Model: Real","Date: 2023-04-01<br />Value: 135.5000<br />Model: Real","Date: 2023-05-01<br />Value: 133.5000<br />Model: Real","Date: 2023-06-01<br />Value: 132.0000<br />Model: Real","Date: 2023-07-01<br />Value: 130.8000<br />Model: Real","Date: 2023-08-01<br />Value: 132.1000<br />Model: Real","Date: 2023-09-01<br />Value: 132.4000<br />Model: Real","Date: 2023-10-01<br />Value: 131.9000<br />Model: Real","Date: 2023-11-01<br />Value: 130.9000<br />Model: Real","Date: 2023-12-01<br />Value: 129.5000<br />Model: Real"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"Real","legendgroup":"Real","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.83498465799791,126.39230250501281,125.94962035202771,125.50693819904261,125.06425604605751,124.62157389307241,124.17889174008731,123.73620958710221,123.29352743411711,122.85084528113201,122.40816312814691,121.96548097516181],"text":["Date: 2023-01-01<br />Value: 126.8350<br />Model: SSARIMA","Date: 2023-02-01<br />Value: 126.3923<br />Model: SSARIMA","Date: 2023-03-01<br />Value: 125.9496<br />Model: SSARIMA","Date: 2023-04-01<br />Value: 125.5069<br />Model: SSARIMA","Date: 2023-05-01<br />Value: 125.0643<br />Model: SSARIMA","Date: 2023-06-01<br />Value: 124.6216<br />Model: SSARIMA","Date: 2023-07-01<br />Value: 124.1789<br />Model: SSARIMA","Date: 2023-08-01<br />Value: 123.7362<br />Model: SSARIMA","Date: 2023-09-01<br />Value: 123.2935<br />Model: SSARIMA","Date: 2023-10-01<br />Value: 122.8508<br />Model: SSARIMA","Date: 2023-11-01<br />Value: 122.4082<br />Model: SSARIMA","Date: 2023-12-01<br />Value: 121.9655<br />Model: SSARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,98,188,1)","dash":"solid"},"hoveron":"points","name":"SSARIMA","legendgroup":"SSARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Comparaison des prévisions des modèles avec les données réelles<br />       Jan 2023 à Déc 2023 - série corrigée","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19341.299999999999,19708.700000000001],"tickmode":"array","ticktext":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"tickvals":[19358,19448,19539,19631],"categoryorder":"array","categoryarray":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[118.78819638060938,141.11484779139954],"tickmode":"array","ticktext":["120","125","130","135","140"],"tickvals":[120,125,130,135,140],"categoryorder":"array","categoryarray":["120","125","130","135","140"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Valeur","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Modèle","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e1dd58eea7":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"e1dd58eea7","visdat":{"e1dd58eea7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Récupération des données completes de janvier 2005 à décembre 2023</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>ip <span class="ot">&lt;-</span> ipampa1[<span class="fu">nrow</span>(ipampa1)<span class="sc">:</span><span class="dv">1</span>,]</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>ip <span class="ot">&lt;-</span> ip[, <span class="dv">2</span>]</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>ip <span class="ot">&lt;-</span> <span class="fu">ts</span>(<span class="at">data =</span> ip, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2005</span>, <span class="dv">01</span>), <span class="at">frequency=</span><span class="dv">12</span>) </span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>ip</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec
2005  78.2  78.5  79.1  79.3  78.9  79.4  79.8  80.0  80.5  80.7  80.3  80.4
2006  80.8  81.1  81.3  81.8  81.8  81.8  81.9  82.1  81.9  82.1  82.3  82.5
2007  82.6  83.1  83.8  84.5  84.8  85.1  85.8  86.6  88.1  89.5  91.1  91.9
2008  93.2  94.4  95.7  96.9  98.8 100.2 101.3 100.6 100.6  99.5  97.7  95.8
2009  95.4  94.8  93.9  93.5  92.7  92.2  90.8  90.7  90.1  89.7  89.4  89.3
2010  89.5  89.8  90.4  91.0  91.2  91.4  91.3  92.1  93.7  95.0  95.6  96.6
2011  98.0  99.4 100.6 101.0 100.4 100.6 101.0 100.9 101.3 101.3 101.2 101.0
2012 100.6 101.2 101.9 102.3 102.3 101.8 103.1 105.1 106.0 106.5 106.4 106.3
2013 106.4 106.8 106.4 105.7 105.4 105.0 104.6 104.2 103.7 103.0 102.7 102.7
2014 102.9 103.0 103.1 103.3 103.3 103.1 102.5 102.1 101.6 101.0 100.4  99.5
2015  99.1 100.5 100.7 101.1 101.3 100.6 100.2  99.7  99.6  99.5  99.3  98.3
2016  97.8  97.5  97.6  97.4  97.9  97.8  97.3  96.9  97.0  97.4  97.2  98.3
2017  98.6  99.0  98.9  99.1  98.7  98.1  97.9  98.0  98.4  98.9  99.2  99.3
2018 100.1 100.1 100.4 101.1 102.0 101.9 102.2 102.7 103.6 104.6 104.5 103.8
2019 103.6 104.1 104.4 104.6 104.4 103.8 103.7 103.3 103.7 103.6 103.3 103.5
2020 103.6 103.4 102.3 101.7 101.7 101.8 101.8 101.8 101.5 102.1 102.6 103.1
2021 104.5 106.4 107.6 107.9 108.5 109.6 110.9 111.6 113.2 117.5 119.5 120.5
2022 123.1 124.9 133.2 134.6 136.1 138.6 138.2 138.9 139.5 142.0 141.3 139.6
2023 140.1 138.6 137.5 135.5 133.5 132.0 130.8 132.1 132.4 131.9 130.9 129.5</code></pre>
</div>
</div>
</section>
</section>
<section id="série-complete-corrigée" class="level2">
<h2 class="anchored" data-anchor-id="série-complete-corrigée">Série complete corrigée</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Automatic Procedure for Detection of Outliers</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tso</span>(ip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Series: ip 
Regression with ARIMA(1,1,1) errors 

Coefficients:
         ar1      ma1   LS202   LS207   TC214
      0.8275  -0.2803  2.7628  6.6897  2.3709
s.e.  0.0557   0.1008  0.5046  0.5038  0.4368

sigma^2 = 0.3418:  log likelihood = -198.09
AIC=408.17   AICc=408.56   BIC=428.72

Outliers:
  type ind    time coefhat  tstat
1   LS 202 2021:10   2.763  5.475
2   LS 207 2022:03   6.690 13.278
3   TC 214 2022:10   2.371  5.429</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>fit_ip <span class="ot">&lt;-</span> <span class="fu">tso</span>(ip)</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co"># outlier-adjusted series</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a>ip_corrige <span class="ot">&lt;-</span> fit_ip<span class="sc">$</span>yadj</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a>ip_corrige</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2005  78.2000  78.5000  79.1000  79.3000  78.9000  79.4000  79.8000  80.0000
2006  80.8000  81.1000  81.3000  81.8000  81.8000  81.8000  81.9000  82.1000
2007  82.6000  83.1000  83.8000  84.5000  84.8000  85.1000  85.8000  86.6000
2008  93.2000  94.4000  95.7000  96.9000  98.8000 100.2000 101.3000 100.6000
2009  95.4000  94.8000  93.9000  93.5000  92.7000  92.2000  90.8000  90.7000
2010  89.5000  89.8000  90.4000  91.0000  91.2000  91.4000  91.3000  92.1000
2011  98.0000  99.4000 100.6000 101.0000 100.4000 100.6000 101.0000 100.9000
2012 100.6000 101.2000 101.9000 102.3000 102.3000 101.8000 103.1000 105.1000
2013 106.4000 106.8000 106.4000 105.7000 105.4000 105.0000 104.6000 104.2000
2014 102.9000 103.0000 103.1000 103.3000 103.3000 103.1000 102.5000 102.1000
2015  99.1000 100.5000 100.7000 101.1000 101.3000 100.6000 100.2000  99.7000
2016  97.8000  97.5000  97.6000  97.4000  97.9000  97.8000  97.3000  96.9000
2017  98.6000  99.0000  98.9000  99.1000  98.7000  98.1000  97.9000  98.0000
2018 100.1000 100.1000 100.4000 101.1000 102.0000 101.9000 102.2000 102.7000
2019 103.6000 104.1000 104.4000 104.6000 104.4000 103.8000 103.7000 103.3000
2020 103.6000 103.4000 102.3000 101.7000 101.7000 101.8000 101.8000 101.8000
2021 104.5000 106.4000 107.6000 107.9000 108.5000 109.6000 110.9000 111.6000
2022 120.3372 122.1372 123.7475 125.1475 126.6475 129.1475 128.7475 129.4475
2023 129.8342 128.5782 127.6490 125.7685 123.8522 122.4108 121.2518 122.5805
          Sep      Oct      Nov      Dec
2005  80.5000  80.7000  80.3000  80.4000
2006  81.9000  82.1000  82.3000  82.5000
2007  88.1000  89.5000  91.1000  91.9000
2008 100.6000  99.5000  97.7000  95.8000
2009  90.1000  89.7000  89.4000  89.3000
2010  93.7000  95.0000  95.6000  96.6000
2011 101.3000 101.3000 101.2000 101.0000
2012 106.0000 106.5000 106.4000 106.3000
2013 103.7000 103.0000 102.7000 102.7000
2014 101.6000 101.0000 100.4000  99.5000
2015  99.6000  99.5000  99.3000  98.3000
2016  97.0000  97.4000  97.2000  98.3000
2017  98.4000  98.9000  99.2000  99.3000
2018 103.6000 104.6000 104.5000 103.8000
2019 103.7000 103.6000 103.3000 103.5000
2020 101.5000 102.1000 102.6000 103.1000
2021 113.2000 114.7372 116.7372 117.7372
2022 130.0475 130.1765 130.1878 128.9857
2023 122.9006 122.4146 121.4245 120.0314</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>ip_20023 <span class="ot">&lt;-</span>  <span class="fu">window</span>(ip_corrige, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">1</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">12</span>))</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>ip_20023 <span class="co"># recuperation des donnes pour 2023 de la série corrigé </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2023 129.8342 128.5782 127.6490 125.7685 123.8522 122.4108 121.2518 122.5805
          Sep      Oct      Nov      Dec
2023 122.9006 122.4146 121.4245 120.0314</code></pre>
</div>
</div>
</section>
<section id="graphique-prévisions-de-modeles-comparés-au-données-corrigés" class="level2">
<h2 class="anchored" data-anchor-id="graphique-prévisions-de-modeles-comparés-au-données-corrigés">Graphique Prévisions de modeles comparés au données corrigés</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>dec_2022 <span class="ot">&lt;-</span> <span class="fl">128.9857</span> <span class="co"># derniere valeur observé, pour la reintegration</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  data frames avec les dates et les prévisions</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Date =</span> forecast_dates,</span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">AR1 =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>AR1),</span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARP =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARP),</span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARIMA =</span> dec_2022 <span class="sc">+</span> <span class="fu">cumsum</span>(df<span class="sc">$</span>ARIMA),</span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">HOLT_WINTER =</span> <span class="fu">as.numeric</span>(forecast_hw2<span class="sc">$</span>mean),</span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a> <span class="at">ADAM_ETS =</span> <span class="fu">as.numeric</span>(forecast_ae2<span class="sc">$</span>mean),</span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a> <span class="at">ADAM_ETS_SARIMA =</span> <span class="fu">as.numeric</span>(forecast_aea2<span class="sc">$</span>mean),</span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a> <span class="at">SSARIMA =</span>  <span class="fu">as.numeric</span>(forecast_ssarima2<span class="sc">$</span>mean),</span>
<span id="cb191-13"><a href="#cb191-13" aria-hidden="true" tabindex="-1"></a> <span class="at">CES =</span> <span class="fu">as.numeric</span>(forecast_ces2<span class="sc">$</span>mean),</span>
<span id="cb191-14"><a href="#cb191-14" aria-hidden="true" tabindex="-1"></a> <span class="at">NAIVE =</span> <span class="fu">as.numeric</span>(forecast_naive2<span class="sc">$</span>mean),</span>
<span id="cb191-15"><a href="#cb191-15" aria-hidden="true" tabindex="-1"></a> <span class="at">corrige =</span> <span class="fu">as.numeric</span>(ip_20023) <span class="co"># on integre les données corrigés</span></span>
<span id="cb191-16"><a href="#cb191-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb191-17"><a href="#cb191-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-18"><a href="#cb191-18" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date      AR1      ARP    ARIMA HOLT_WINTER ADAM_ETS ADAM_ETS_SARIMA
1  2023-01-01 128.2190 128.2553 128.3163    126.8253 126.7827        126.7636
2  2023-02-01 127.7501 127.6288 127.7517    126.1869 126.2061        126.1681
3  2023-03-01 127.4887 127.1352 127.2755    125.5485 125.7241        125.6880
4  2023-04-01 127.3718 126.7386 126.8738    124.9101 125.3410        125.2948
5  2023-05-01 127.3556 126.4215 126.5350    124.2717 125.0289        124.9711
6  2023-06-01 127.4095 126.1676 126.2493    123.6333 124.7638        124.7042
7  2023-07-01 127.5123 125.9644 126.0083    122.9950 124.5520        124.4836
8  2023-08-01 127.6491 125.8018 125.8051    122.3566 124.3797        124.3059
9  2023-09-01 127.8097 125.6717 125.6336    121.7182 124.2318        124.1553
10 2023-10-01 127.9867 125.5675 125.4891    121.0798 124.1225        124.0212
11 2023-11-01 128.1753 125.4841 125.3671    120.4414 124.0340        123.9137
12 2023-12-01 128.3719 125.4174 125.2642    119.8030 123.9569        123.8230
    SSARIMA      CES    NAIVE  corrige
1  126.8350 128.0169 127.4637 129.8342
2  126.3923 128.4711 127.4637 128.5782
3  125.9496 128.9841 127.4637 127.6490
4  125.5069 129.2816 127.4637 125.7685
5  125.0643 129.6860 127.4637 123.8522
6  124.6216 129.7981 127.4637 122.4108
7  124.1789 129.9620 127.4637 121.2518
8  123.7362 130.1308 127.4637 122.5805
9  123.2935 130.6903 127.4637 122.9006
10 122.8508 130.9689 127.4637 122.4146
11 122.4082 131.2151 127.4637 121.4245
12 121.9655 131.2254 127.4637 120.0314</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les données en format long</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>df_long2 <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(df2, <span class="at">cols =</span> <span class="sc">-</span>Date, <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co"># graphique plotly</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_long2, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> Value, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparaison des prévisions  avec les données corrigées</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a><span class="st">       Jan 2023 à Déc 2023 - série corrigée"</span>,</span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valeur"</span>,</span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Modèle"</span>) <span class="sc">+</span></span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-f2a3d87744597fbdfe37" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-f2a3d87744597fbdfe37">{"x":{"data":[{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.7827028417793,126.20607454587487,125.72409486018451,125.3409706308823,125.02888732923459,124.76382892126996,124.55198444233804,124.37971690957265,124.23177080649579,124.12245806724383,124.0339814812009,123.95690931773184],"text":["Date: 2023-01-01<br />Value: 126.7827<br />Model: ADAM_ETS","Date: 2023-02-01<br />Value: 126.2061<br />Model: ADAM_ETS","Date: 2023-03-01<br />Value: 125.7241<br />Model: ADAM_ETS","Date: 2023-04-01<br />Value: 125.3410<br />Model: ADAM_ETS","Date: 2023-05-01<br />Value: 125.0289<br />Model: ADAM_ETS","Date: 2023-06-01<br />Value: 124.7638<br />Model: ADAM_ETS","Date: 2023-07-01<br />Value: 124.5520<br />Model: ADAM_ETS","Date: 2023-08-01<br />Value: 124.3797<br />Model: ADAM_ETS","Date: 2023-09-01<br />Value: 124.2318<br />Model: ADAM_ETS","Date: 2023-10-01<br />Value: 124.1225<br />Model: ADAM_ETS","Date: 2023-11-01<br />Value: 124.0340<br />Model: ADAM_ETS","Date: 2023-12-01<br />Value: 123.9569<br />Model: ADAM_ETS"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS","legendgroup":"ADAM_ETS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.76359086222905,126.16810374258299,125.68802770389068,125.29480640565559,124.97105425175396,124.70418895609447,124.48364993866689,124.3059002229451,124.15534200776477,124.02123941505525,123.91368691491016,123.82304733742994],"text":["Date: 2023-01-01<br />Value: 126.7636<br />Model: ADAM_ETS_SARIMA","Date: 2023-02-01<br />Value: 126.1681<br />Model: ADAM_ETS_SARIMA","Date: 2023-03-01<br />Value: 125.6880<br />Model: ADAM_ETS_SARIMA","Date: 2023-04-01<br />Value: 125.2948<br />Model: ADAM_ETS_SARIMA","Date: 2023-05-01<br />Value: 124.9711<br />Model: ADAM_ETS_SARIMA","Date: 2023-06-01<br />Value: 124.7042<br />Model: ADAM_ETS_SARIMA","Date: 2023-07-01<br />Value: 124.4836<br />Model: ADAM_ETS_SARIMA","Date: 2023-08-01<br />Value: 124.3059<br />Model: ADAM_ETS_SARIMA","Date: 2023-09-01<br />Value: 124.1553<br />Model: ADAM_ETS_SARIMA","Date: 2023-10-01<br />Value: 124.0212<br />Model: ADAM_ETS_SARIMA","Date: 2023-11-01<br />Value: 123.9137<br />Model: ADAM_ETS_SARIMA","Date: 2023-12-01<br />Value: 123.8230<br />Model: ADAM_ETS_SARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(216,144,0,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS_SARIMA","legendgroup":"ADAM_ETS_SARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[128.21897290112759,127.75007798926245,127.48865930613263,127.37177297164779,127.35557094173201,127.40950773735668,127.51230472891005,127.64913877095292,127.80968374546346,127.98674625925553,128.17531524181629,128.37189987496936],"text":["Date: 2023-01-01<br />Value: 128.2190<br />Model: AR1","Date: 2023-02-01<br />Value: 127.7501<br />Model: AR1","Date: 2023-03-01<br />Value: 127.4887<br />Model: AR1","Date: 2023-04-01<br />Value: 127.3718<br />Model: AR1","Date: 2023-05-01<br />Value: 127.3556<br />Model: AR1","Date: 2023-06-01<br />Value: 127.4095<br />Model: AR1","Date: 2023-07-01<br />Value: 127.5123<br />Model: AR1","Date: 2023-08-01<br />Value: 127.6491<br />Model: AR1","Date: 2023-09-01<br />Value: 127.8097<br />Model: AR1","Date: 2023-10-01<br />Value: 127.9867<br />Model: AR1","Date: 2023-11-01<br />Value: 128.1753<br />Model: AR1","Date: 2023-12-01<br />Value: 128.3719<br />Model: AR1"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)","dash":"solid"},"hoveron":"points","name":"AR1","legendgroup":"AR1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[128.3162756894331,127.75166353902004,127.27545304686731,126.87380311306686,126.53503974690781,126.24931676130808,126.00832959251927,125.80507392724986,125.63364212168214,125.48905149528436,125.36709950876194,125.2642416168828],"text":["Date: 2023-01-01<br />Value: 128.3163<br />Model: ARIMA","Date: 2023-02-01<br />Value: 127.7517<br />Model: ARIMA","Date: 2023-03-01<br />Value: 127.2755<br />Model: ARIMA","Date: 2023-04-01<br />Value: 126.8738<br />Model: ARIMA","Date: 2023-05-01<br />Value: 126.5350<br />Model: ARIMA","Date: 2023-06-01<br />Value: 126.2493<br />Model: ARIMA","Date: 2023-07-01<br />Value: 126.0083<br />Model: ARIMA","Date: 2023-08-01<br />Value: 125.8051<br />Model: ARIMA","Date: 2023-09-01<br />Value: 125.6336<br />Model: ARIMA","Date: 2023-10-01<br />Value: 125.4891<br />Model: ARIMA","Date: 2023-11-01<br />Value: 125.3671<br />Model: ARIMA","Date: 2023-12-01<br />Value: 125.2642<br />Model: ARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(57,182,0,1)","dash":"solid"},"hoveron":"points","name":"ARIMA","legendgroup":"ARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[128.25532119103153,127.62880446360502,127.13515701159393,126.73860297418008,126.42148092832069,126.16761418003782,125.96443492446849,125.80181359599095,125.67165587715047,125.56748083598208,125.48410175108924,125.41736721594577],"text":["Date: 2023-01-01<br />Value: 128.2553<br />Model: ARP","Date: 2023-02-01<br />Value: 127.6288<br />Model: ARP","Date: 2023-03-01<br />Value: 127.1352<br />Model: ARP","Date: 2023-04-01<br />Value: 126.7386<br />Model: ARP","Date: 2023-05-01<br />Value: 126.4215<br />Model: ARP","Date: 2023-06-01<br />Value: 126.1676<br />Model: ARP","Date: 2023-07-01<br />Value: 125.9644<br />Model: ARP","Date: 2023-08-01<br />Value: 125.8018<br />Model: ARP","Date: 2023-09-01<br />Value: 125.6717<br />Model: ARP","Date: 2023-10-01<br />Value: 125.5675<br />Model: ARP","Date: 2023-11-01<br />Value: 125.4841<br />Model: ARP","Date: 2023-12-01<br />Value: 125.4174<br />Model: ARP"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)","dash":"solid"},"hoveron":"points","name":"ARP","legendgroup":"ARP","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[128.01688513962125,128.47105590132705,128.98413585808899,129.28164948863139,129.68595222021733,129.79812923520524,129.96197293225785,130.13075369227104,130.69027114808469,130.96887396444532,131.21507834577574,131.22535533285426],"text":["Date: 2023-01-01<br />Value: 128.0169<br />Model: CES","Date: 2023-02-01<br />Value: 128.4711<br />Model: CES","Date: 2023-03-01<br />Value: 128.9841<br />Model: CES","Date: 2023-04-01<br />Value: 129.2816<br />Model: CES","Date: 2023-05-01<br />Value: 129.6860<br />Model: CES","Date: 2023-06-01<br />Value: 129.7981<br />Model: CES","Date: 2023-07-01<br />Value: 129.9620<br />Model: CES","Date: 2023-08-01<br />Value: 130.1308<br />Model: CES","Date: 2023-09-01<br />Value: 130.6903<br />Model: CES","Date: 2023-10-01<br />Value: 130.9689<br />Model: CES","Date: 2023-11-01<br />Value: 131.2151<br />Model: CES","Date: 2023-12-01<br />Value: 131.2254<br />Model: CES"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"CES","legendgroup":"CES","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[129.83423671658204,128.57820345630543,127.64898017411181,125.76852387657627,123.85220446830139,122.41078088250897,121.2517843724543,122.58048681541599,122.90057852548921,122.41464272254045,121.42448766047632,120.03137911703142],"text":["Date: 2023-01-01<br />Value: 129.8342<br />Model: corrige","Date: 2023-02-01<br />Value: 128.5782<br />Model: corrige","Date: 2023-03-01<br />Value: 127.6490<br />Model: corrige","Date: 2023-04-01<br />Value: 125.7685<br />Model: corrige","Date: 2023-05-01<br />Value: 123.8522<br />Model: corrige","Date: 2023-06-01<br />Value: 122.4108<br />Model: corrige","Date: 2023-07-01<br />Value: 121.2518<br />Model: corrige","Date: 2023-08-01<br />Value: 122.5805<br />Model: corrige","Date: 2023-09-01<br />Value: 122.9006<br />Model: corrige","Date: 2023-10-01<br />Value: 122.4146<br />Model: corrige","Date: 2023-11-01<br />Value: 121.4245<br />Model: corrige","Date: 2023-12-01<br />Value: 120.0314<br />Model: corrige"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)","dash":"solid"},"hoveron":"points","name":"corrige","legendgroup":"corrige","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.82526681655629,126.18688293977925,125.54849906300223,124.9101151862252,124.27173130944816,123.63334743267113,122.99496355589409,122.35657967911706,121.71819580234003,121.07981192556299,120.44142804878597,119.80304417200892],"text":["Date: 2023-01-01<br />Value: 126.8253<br />Model: HOLT_WINTER","Date: 2023-02-01<br />Value: 126.1869<br />Model: HOLT_WINTER","Date: 2023-03-01<br />Value: 125.5485<br />Model: HOLT_WINTER","Date: 2023-04-01<br />Value: 124.9101<br />Model: HOLT_WINTER","Date: 2023-05-01<br />Value: 124.2717<br />Model: HOLT_WINTER","Date: 2023-06-01<br />Value: 123.6333<br />Model: HOLT_WINTER","Date: 2023-07-01<br />Value: 122.9950<br />Model: HOLT_WINTER","Date: 2023-08-01<br />Value: 122.3566<br />Model: HOLT_WINTER","Date: 2023-09-01<br />Value: 121.7182<br />Model: HOLT_WINTER","Date: 2023-10-01<br />Value: 121.0798<br />Model: HOLT_WINTER","Date: 2023-11-01<br />Value: 120.4414<br />Model: HOLT_WINTER","Date: 2023-12-01<br />Value: 119.8030<br />Model: HOLT_WINTER"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(149,144,255,1)","dash":"solid"},"hoveron":"points","name":"HOLT_WINTER","legendgroup":"HOLT_WINTER","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332,127.46365069333332],"text":["Date: 2023-01-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-02-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-03-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-04-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-05-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-06-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-07-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-08-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-09-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-10-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-11-01<br />Value: 127.4637<br />Model: NAIVE","Date: 2023-12-01<br />Value: 127.4637<br />Model: NAIVE"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)","dash":"solid"},"hoveron":"points","name":"NAIVE","legendgroup":"NAIVE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[126.83498465799791,126.39230250501281,125.94962035202771,125.50693819904261,125.06425604605751,124.62157389307241,124.17889174008731,123.73620958710221,123.29352743411711,122.85084528113201,122.40816312814691,121.96548097516181],"text":["Date: 2023-01-01<br />Value: 126.8350<br />Model: SSARIMA","Date: 2023-02-01<br />Value: 126.3923<br />Model: SSARIMA","Date: 2023-03-01<br />Value: 125.9496<br />Model: SSARIMA","Date: 2023-04-01<br />Value: 125.5069<br />Model: SSARIMA","Date: 2023-05-01<br />Value: 125.0643<br />Model: SSARIMA","Date: 2023-06-01<br />Value: 124.6216<br />Model: SSARIMA","Date: 2023-07-01<br />Value: 124.1789<br />Model: SSARIMA","Date: 2023-08-01<br />Value: 123.7362<br />Model: SSARIMA","Date: 2023-09-01<br />Value: 123.2935<br />Model: SSARIMA","Date: 2023-10-01<br />Value: 122.8508<br />Model: SSARIMA","Date: 2023-11-01<br />Value: 122.4082<br />Model: SSARIMA","Date: 2023-12-01<br />Value: 121.9655<br />Model: SSARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,98,188,1)","dash":"solid"},"hoveron":"points","name":"SSARIMA","legendgroup":"SSARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Comparaison des prévisions  avec les données corrigées<br />       Jan 2023 à Déc 2023 - série corrigée","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19341.299999999999,19708.700000000001],"tickmode":"array","ticktext":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"tickvals":[19358,19448,19539,19631],"categoryorder":"array","categoryarray":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[119.23192861396666,131.79647089089653],"tickmode":"array","ticktext":["120","123","126","129"],"tickvals":[120,123,126,129],"categoryorder":"array","categoryarray":["120","123","126","129"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Valeur","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Modèle","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e1d7dad3acf":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"e1d7dad3acf","visdat":{"e1d7dad3acf":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="qualité-de-prévision-2" class="level1">
<h1>Qualité de prévision 2</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Erreur de prévision , comparatif entre la valeur predicte de chaque modele et la valeur real corrigé</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>models2 <span class="ot">&lt;-</span> <span class="fu">names</span>(df2)[<span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(df2) <span class="sc">==</span> <span class="st">"Date"</span> <span class="sc">|</span> <span class="fu">names</span>(df2) <span class="sc">==</span> <span class="st">"corrige"</span>)]</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co"># erreur pour chaque modèle</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>errors_df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> df2<span class="sc">$</span>Date)  <span class="co">#  dataframe pour stocker les erreurs</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (m <span class="cf">in</span> models2) {</span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>  errors_df2[[m]] <span class="ot">&lt;-</span> df2[[m]] <span class="sc">-</span> df2<span class="sc">$</span>corrige</span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>errors_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date        AR1        ARP      ARIMA HOLT_WINTER   ADAM_ETS
1  2023-01-01 -1.6152638 -1.5789155 -1.5179610  -3.0089699 -3.0515339
2  2023-02-01 -0.8281255 -0.9493990 -0.8265399  -2.3913205 -2.3721289
3  2023-03-01 -0.1603209 -0.5138232 -0.3735271  -2.1004811 -1.9248853
4  2023-04-01  1.6032491  0.9700791  1.1052792  -0.8584087 -0.4275532
5  2023-05-01  3.5033665  2.5692765  2.6828353   0.4195268  1.1766829
6  2023-06-01  4.9987269  3.7568333  3.8385359   1.2225666  2.3530480
7  2023-07-01  6.2605204  4.7126506  4.7565452   1.7431792  3.3002001
8  2023-08-01  5.0686520  3.2213268  3.2245871  -0.2239071  1.7992301
9  2023-09-01  4.9091052  2.7710774  2.7330636  -1.1823827  1.3311923
10 2023-10-01  5.5721035  3.1528381  3.0744088  -1.3348308  1.7078153
11 2023-11-01  6.7508276  4.0596141  3.9426118  -0.9830596  2.6094938
12 2023-12-01  8.3405208  5.3859881  5.2328625  -0.2283349  3.9255302
   ADAM_ETS_SARIMA    SSARIMA        CES      NAIVE
1       -3.0706459 -2.9992521 -1.8173516 -2.3705860
2       -2.4100997 -2.1859010 -0.1071476 -1.1145528
3       -1.9609525 -1.6993598  1.3351557 -0.1853295
4       -0.4737175 -0.2615857  3.5131256  1.6951268
5        1.1188498  1.2120516  5.8337478  3.6114462
6        2.2934081  2.2107930  7.3873484  5.0528698
7        3.2318656  2.9271074  8.7101886  6.2118663
8        1.7254134  1.1557228  7.5502669  4.8831639
9        1.2547635  0.3929489  7.7896926  4.5630722
10       1.6065967  0.4362026  8.5542312  5.0490080
11       2.4891993  0.9836755  9.7905907  6.0391630
12       3.7916682  1.9341019 11.1939762  7.4322716</code></pre>
</div>
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>corrige</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 129.8342 128.5782 127.6490 125.7685 123.8522 122.4108 121.2518 122.5805
 [9] 122.9006 122.4146 121.4245 120.0314</code></pre>
</div>
</div>
<section id="cspe-2" class="level3">
<h3 class="anchored" data-anchor-id="cspe-2">CSPE 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># errors_df contienne déjà les erreurs pour chaque modèle calculées comme précédemment</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>cspe_df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Date =</span> df2<span class="sc">$</span>Date)  <span class="co">#  nouveau dataframe pour stocker le CSPE</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (m <span class="cf">in</span> models2) {</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>  cspe_df2[[m]] <span class="ot">&lt;-</span> <span class="fu">cumsum</span>(errors_df2[[m]])  <span class="co"># Calcul du CSPE </span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>cspe_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Date       AR1        ARP     ARIMA HOLT_WINTER   ADAM_ETS
1  2023-01-01 -1.615264 -1.5789155 -1.517961   -3.008970 -3.0515339
2  2023-02-01 -2.443389 -2.5283145 -2.344501   -5.400290 -5.4236628
3  2023-03-01 -2.603710 -3.0421377 -2.718028   -7.500772 -7.3485481
4  2023-04-01 -1.000461 -2.0720586 -1.612749   -8.359180 -7.7761013
5  2023-05-01  2.502905  0.4972179  1.070086   -7.939653 -6.5994185
6  2023-06-01  7.501632  4.2540512  4.908622   -6.717087 -4.2463704
7  2023-07-01 13.762153  8.9667017  9.665168   -4.973908 -0.9461704
8  2023-08-01 18.830805 12.1880285 12.889755   -5.197815  0.8530597
9  2023-09-01 23.739910 14.9591059 15.622818   -6.380198  2.1842520
10 2023-10-01 29.312013 18.1119440 18.697227   -7.715028  3.8920673
11 2023-11-01 36.062841 22.1715581 22.639839   -8.698088  6.5015612
12 2023-12-01 44.403362 27.5575462 27.872701   -8.926423 10.4270914
   ADAM_ETS_SARIMA    SSARIMA        CES     NAIVE
1       -3.0706459 -2.9992521 -1.8173516 -2.370586
2       -5.4807456 -5.1851530 -1.9244991 -3.485139
3       -7.4416980 -6.8845128 -0.5893434 -3.670468
4       -7.9154155 -7.1460985  2.9237822 -1.975341
5       -6.7965657 -5.9340469  8.7575299  1.636105
6       -4.5031577 -3.7232539 16.1448783  6.688975
7       -1.2712921 -0.7961466 24.8550668 12.900841
8        0.4541213  0.3595762 32.4053337 17.784005
9        1.7088848  0.7525251 40.1950263 22.347077
10       3.3154815  1.1887277 48.7492576 27.396085
11       5.8046808  2.1724032 58.5398483 33.435248
12       9.5963490  4.1065050 69.7338245 40.867520</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  on pivot cspe_df2 pour l'utiliser avec ggplot2</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>cspe_long2 <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(cspe_df2, <span class="at">cols =</span> <span class="sc">-</span>Date,  <span class="at">names_to =</span> <span class="st">"Model"</span>, <span class="at">values_to =</span> <span class="st">"CSPE"</span>)</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(cspe_long2, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> CSPE, <span class="at">color =</span> Model)) <span class="sc">+</span></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative Sum of Prediction Errors (CSPE) "</span>,</span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"CSPE"</span>) <span class="sc">+</span></span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggplotly</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-141a2e9ac928daf07eca" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-141a2e9ac928daf07eca">{"x":{"data":[{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-3.0515338748027432,-5.4236627852333044,-7.3485480991606096,-7.776101344854581,-6.599418483921383,-4.2463704451603945,-0.94617037527665104,0.85305971888000443,2.1842519998865839,3.892067344589961,6.5015611653145413,10.427091366014963],"text":["Date: 2023-01-01<br />CSPE: -3.0515339<br />Model: ADAM_ETS","Date: 2023-02-01<br />CSPE: -5.4236628<br />Model: ADAM_ETS","Date: 2023-03-01<br />CSPE: -7.3485481<br />Model: ADAM_ETS","Date: 2023-04-01<br />CSPE: -7.7761013<br />Model: ADAM_ETS","Date: 2023-05-01<br />CSPE: -6.5994185<br />Model: ADAM_ETS","Date: 2023-06-01<br />CSPE: -4.2463704<br />Model: ADAM_ETS","Date: 2023-07-01<br />CSPE: -0.9461704<br />Model: ADAM_ETS","Date: 2023-08-01<br />CSPE:  0.8530597<br />Model: ADAM_ETS","Date: 2023-09-01<br />CSPE:  2.1842520<br />Model: ADAM_ETS","Date: 2023-10-01<br />CSPE:  3.8920673<br />Model: ADAM_ETS","Date: 2023-11-01<br />CSPE:  6.5015612<br />Model: ADAM_ETS","Date: 2023-12-01<br />CSPE: 10.4270914<br />Model: ADAM_ETS"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS","legendgroup":"ADAM_ETS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-3.0706458543529891,-5.4807455680754344,-7.4416980382965647,-7.9154155092172402,-6.7965657257646797,-4.5031576521791834,-1.2712920859665928,0.45412132156251062,1.7088848038380746,3.3154814963528736,5.8046807507867157,9.5963489711852361],"text":["Date: 2023-01-01<br />CSPE: -3.0706459<br />Model: ADAM_ETS_SARIMA","Date: 2023-02-01<br />CSPE: -5.4807456<br />Model: ADAM_ETS_SARIMA","Date: 2023-03-01<br />CSPE: -7.4416980<br />Model: ADAM_ETS_SARIMA","Date: 2023-04-01<br />CSPE: -7.9154155<br />Model: ADAM_ETS_SARIMA","Date: 2023-05-01<br />CSPE: -6.7965657<br />Model: ADAM_ETS_SARIMA","Date: 2023-06-01<br />CSPE: -4.5031577<br />Model: ADAM_ETS_SARIMA","Date: 2023-07-01<br />CSPE: -1.2712921<br />Model: ADAM_ETS_SARIMA","Date: 2023-08-01<br />CSPE:  0.4541213<br />Model: ADAM_ETS_SARIMA","Date: 2023-09-01<br />CSPE:  1.7088848<br />Model: ADAM_ETS_SARIMA","Date: 2023-10-01<br />CSPE:  3.3154815<br />Model: ADAM_ETS_SARIMA","Date: 2023-11-01<br />CSPE:  5.8046808<br />Model: ADAM_ETS_SARIMA","Date: 2023-12-01<br />CSPE:  9.5963490<br />Model: ADAM_ETS_SARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(211,146,0,1)","dash":"solid"},"hoveron":"points","name":"ADAM_ETS_SARIMA","legendgroup":"ADAM_ETS_SARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-1.6152638154544547,-2.443389282497435,-2.6037101504766156,-1.000461055405097,2.5029054180255201,7.5016322728732234,13.76215262932898,18.830804584865902,23.739909804840153,29.312013341555229,36.062840922895205,44.403361680833143],"text":["Date: 2023-01-01<br />CSPE: -1.6152638<br />Model: AR1","Date: 2023-02-01<br />CSPE: -2.4433893<br />Model: AR1","Date: 2023-03-01<br />CSPE: -2.6037102<br />Model: AR1","Date: 2023-04-01<br />CSPE: -1.0004611<br />Model: AR1","Date: 2023-05-01<br />CSPE:  2.5029054<br />Model: AR1","Date: 2023-06-01<br />CSPE:  7.5016323<br />Model: AR1","Date: 2023-07-01<br />CSPE: 13.7621526<br />Model: AR1","Date: 2023-08-01<br />CSPE: 18.8308046<br />Model: AR1","Date: 2023-09-01<br />CSPE: 23.7399098<br />Model: AR1","Date: 2023-10-01<br />CSPE: 29.3120133<br />Model: AR1","Date: 2023-11-01<br />CSPE: 36.0628409<br />Model: AR1","Date: 2023-12-01<br />CSPE: 44.4033617<br />Model: AR1"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(147,170,0,1)","dash":"solid"},"hoveron":"points","name":"AR1","legendgroup":"AR1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-1.5179610271489423,-2.3445009444343299,-2.7180280716788303,-1.612748835188242,1.0700864434181767,4.9086223222172833,9.665167542282262,12.889754654116132,15.622818250309066,18.697227023052974,22.639838871338597,27.872701371189976],"text":["Date: 2023-01-01<br />CSPE: -1.5179610<br />Model: ARIMA","Date: 2023-02-01<br />CSPE: -2.3445009<br />Model: ARIMA","Date: 2023-03-01<br />CSPE: -2.7180281<br />Model: ARIMA","Date: 2023-04-01<br />CSPE: -1.6127488<br />Model: ARIMA","Date: 2023-05-01<br />CSPE:  1.0700864<br />Model: ARIMA","Date: 2023-06-01<br />CSPE:  4.9086223<br />Model: ARIMA","Date: 2023-07-01<br />CSPE:  9.6651675<br />Model: ARIMA","Date: 2023-08-01<br />CSPE: 12.8897547<br />Model: ARIMA","Date: 2023-09-01<br />CSPE: 15.6228183<br />Model: ARIMA","Date: 2023-10-01<br />CSPE: 18.6972270<br />Model: ARIMA","Date: 2023-11-01<br />CSPE: 22.6398389<br />Model: ARIMA","Date: 2023-12-01<br />CSPE: 27.8727014<br />Model: ARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"ARIMA","legendgroup":"ARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-1.5789155255505136,-2.528314518250923,-3.0421376807688034,-2.0720585831649885,0.49721787685430741,4.2540511743831502,8.9667017263973463,12.188028506972302,14.959105858633563,18.111943972075196,22.171558062688121,27.557546161602474],"text":["Date: 2023-01-01<br />CSPE: -1.5789155<br />Model: ARP","Date: 2023-02-01<br />CSPE: -2.5283145<br />Model: ARP","Date: 2023-03-01<br />CSPE: -3.0421377<br />Model: ARP","Date: 2023-04-01<br />CSPE: -2.0720586<br />Model: ARP","Date: 2023-05-01<br />CSPE:  0.4972179<br />Model: ARP","Date: 2023-06-01<br />CSPE:  4.2540512<br />Model: ARP","Date: 2023-07-01<br />CSPE:  8.9667017<br />Model: ARP","Date: 2023-08-01<br />CSPE: 12.1880285<br />Model: ARP","Date: 2023-09-01<br />CSPE: 14.9591059<br />Model: ARP","Date: 2023-10-01<br />CSPE: 18.1119440<br />Model: ARP","Date: 2023-11-01<br />CSPE: 22.1715581<br />Model: ARP","Date: 2023-12-01<br />CSPE: 27.5575462<br />Model: ARP"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,193,159,1)","dash":"solid"},"hoveron":"points","name":"ARP","legendgroup":"ARP","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-1.8173515769607889,-1.9244991319391715,-0.58934344796199412,2.9237821640931259,8.7575299160090623,16.144878268705327,24.855066828508882,32.40533370536393,40.195026327959411,48.749257569864284,58.539848255163704,69.733824470986548],"text":["Date: 2023-01-01<br />CSPE: -1.8173516<br />Model: CES","Date: 2023-02-01<br />CSPE: -1.9244991<br />Model: CES","Date: 2023-03-01<br />CSPE: -0.5893434<br />Model: CES","Date: 2023-04-01<br />CSPE:  2.9237822<br />Model: CES","Date: 2023-05-01<br />CSPE:  8.7575299<br />Model: CES","Date: 2023-06-01<br />CSPE: 16.1448783<br />Model: CES","Date: 2023-07-01<br />CSPE: 24.8550668<br />Model: CES","Date: 2023-08-01<br />CSPE: 32.4053337<br />Model: CES","Date: 2023-09-01<br />CSPE: 40.1950263<br />Model: CES","Date: 2023-10-01<br />CSPE: 48.7492576<br />Model: CES","Date: 2023-11-01<br />CSPE: 58.5398483<br />Model: CES","Date: 2023-12-01<br />CSPE: 69.7338245<br />Model: CES"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,185,227,1)","dash":"solid"},"hoveron":"points","name":"CES","legendgroup":"CES","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-3.0089699000257468,-5.4002904165519254,-7.500771527661513,-8.3591802180125825,-7.9396533768658202,-6.7170868267036639,-4.9739076432638711,-5.1978147795628047,-6.3801975027119795,-7.7150282996894362,-8.6980879113797869,-8.9264228564022829],"text":["Date: 2023-01-01<br />CSPE: -3.0089699<br />Model: HOLT_WINTER","Date: 2023-02-01<br />CSPE: -5.4002904<br />Model: HOLT_WINTER","Date: 2023-03-01<br />CSPE: -7.5007715<br />Model: HOLT_WINTER","Date: 2023-04-01<br />CSPE: -8.3591802<br />Model: HOLT_WINTER","Date: 2023-05-01<br />CSPE: -7.9396534<br />Model: HOLT_WINTER","Date: 2023-06-01<br />CSPE: -6.7170868<br />Model: HOLT_WINTER","Date: 2023-07-01<br />CSPE: -4.9739076<br />Model: HOLT_WINTER","Date: 2023-08-01<br />CSPE: -5.1978148<br />Model: HOLT_WINTER","Date: 2023-09-01<br />CSPE: -6.3801975<br />Model: HOLT_WINTER","Date: 2023-10-01<br />CSPE: -7.7150283<br />Model: HOLT_WINTER","Date: 2023-11-01<br />CSPE: -8.6980879<br />Model: HOLT_WINTER","Date: 2023-12-01<br />CSPE: -8.9264229<br />Model: HOLT_WINTER"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"HOLT_WINTER","legendgroup":"HOLT_WINTER","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-2.3705860232487197,-3.4851387862208298,-3.6704682669993218,-1.9753414502422686,1.6361047747896578,6.6889745856140053,12.900840906493031,17.784004784410357,22.347076952254469,27.39608492304734,33.435247955904345,40.867519532206245],"text":["Date: 2023-01-01<br />CSPE: -2.3705860<br />Model: NAIVE","Date: 2023-02-01<br />CSPE: -3.4851388<br />Model: NAIVE","Date: 2023-03-01<br />CSPE: -3.6704683<br />Model: NAIVE","Date: 2023-04-01<br />CSPE: -1.9753415<br />Model: NAIVE","Date: 2023-05-01<br />CSPE:  1.6361048<br />Model: NAIVE","Date: 2023-06-01<br />CSPE:  6.6889746<br />Model: NAIVE","Date: 2023-07-01<br />CSPE: 12.9008409<br />Model: NAIVE","Date: 2023-08-01<br />CSPE: 17.7840048<br />Model: NAIVE","Date: 2023-09-01<br />CSPE: 22.3470770<br />Model: NAIVE","Date: 2023-10-01<br />CSPE: 27.3960849<br />Model: NAIVE","Date: 2023-11-01<br />CSPE: 33.4352480<br />Model: NAIVE","Date: 2023-12-01<br />CSPE: 40.8675195<br />Model: NAIVE"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(219,114,251,1)","dash":"solid"},"hoveron":"points","name":"NAIVE","legendgroup":"NAIVE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19358,19389,19417,19448,19478,19509,19539,19570,19601,19631,19662,19692],"y":[-2.9992520585841334,-5.1851530098767569,-6.8845128319608619,-7.1460985094945215,-5.9340469317384077,-3.7232539211749724,-0.79614655354195918,0.35957621814425522,0.75252512677215577,1.1887276853637161,2.1724031530343098,4.1065050111646997],"text":["Date: 2023-01-01<br />CSPE: -2.9992521<br />Model: SSARIMA","Date: 2023-02-01<br />CSPE: -5.1851530<br />Model: SSARIMA","Date: 2023-03-01<br />CSPE: -6.8845128<br />Model: SSARIMA","Date: 2023-04-01<br />CSPE: -7.1460985<br />Model: SSARIMA","Date: 2023-05-01<br />CSPE: -5.9340469<br />Model: SSARIMA","Date: 2023-06-01<br />CSPE: -3.7232539<br />Model: SSARIMA","Date: 2023-07-01<br />CSPE: -0.7961466<br />Model: SSARIMA","Date: 2023-08-01<br />CSPE:  0.3595762<br />Model: SSARIMA","Date: 2023-09-01<br />CSPE:  0.7525251<br />Model: SSARIMA","Date: 2023-10-01<br />CSPE:  1.1887277<br />Model: SSARIMA","Date: 2023-11-01<br />CSPE:  2.1724032<br />Model: SSARIMA","Date: 2023-12-01<br />CSPE:  4.1065050<br />Model: SSARIMA"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(255,97,195,1)","dash":"solid"},"hoveron":"points","name":"SSARIMA","legendgroup":"SSARIMA","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19341.299999999999,19708.700000000001],"y":[0,0],"text":"yintercept: 0","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":37.260273972602747},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Cumulative Sum of Prediction Errors (CSPE) ","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19341.299999999999,19708.700000000001],"tickmode":"array","ticktext":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"tickvals":[19358,19448,19539,19631],"categoryorder":"array","categoryarray":["Jan 2023","Apr 2023","Jul 2023","Oct 2023"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-12.859435222771724,73.666836837355987],"tickmode":"array","ticktext":["0","20","40","60"],"tickvals":[0,20,40.000000000000007,60],"categoryorder":"array","categoryarray":["0","20","40","60"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"CSPE","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Model","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"e1d436de5a0":{"x":{},"y":{},"colour":{},"type":"scatter"},"e1d63fe8df5":{"yintercept":{}}},"cur_data":"e1d436de5a0","visdat":{"e1d436de5a0":["function (y) ","x"],"e1d63fe8df5":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="calcul-du-r2oos-2" class="level3">
<h3 class="anchored" data-anchor-id="calcul-du-r2oos-2">Calcul du R2OOS 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame pour stocker le R^2 OOS de chaque modèle</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>r2oos_df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">R2OOS =</span> <span class="fu">numeric</span>())</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co"># R^2 OOS pour chaque modèle, avec modèle naïf comme référence</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>models2 <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(<span class="fu">names</span>(df2), <span class="fu">c</span>(<span class="st">"Date"</span>, <span class="st">"corrige"</span>, <span class="st">"NAIVE"</span>))  <span class="co"># Exclure Date, corrige, et NAIVE de la liste des modèles</span></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models2) {</span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>  r2oos_value2 <span class="ot">&lt;-</span> <span class="fu">calculate_r2oos</span>(df2<span class="sc">$</span>corrige, df2[[model]], df2<span class="sc">$</span>NAIVE) <span class="co">#on reutilise la fonction crée avant</span></span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a>  r2oos_df2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(r2oos_df2, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">R2OOS =</span> r2oos_value2))</span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a>r2oos_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Model      R2OOS
1             AR1 -0.1186581
2             ARP  0.5136306
3           ARIMA  0.5210950
4     HOLT_WINTER  0.8839270
5        ADAM_ETS  0.7315731
6 ADAM_ETS_SARIMA  0.7428897
7         SSARIMA  0.8470932
8             CES -1.3871863</code></pre>
</div>
</div>
</section>
<section id="calcul-du-mse-2" class="level3">
<h3 class="anchored" data-anchor-id="calcul-du-mse-2">Calcul du MSE 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataFrame pour stocker le MSE de chaque modèle</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>mse_df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">MSE =</span> <span class="fu">numeric</span>())</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> models2) {</span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>  mse_value2 <span class="ot">&lt;-</span> <span class="fu">mean</span>((errors_df2[[model]])<span class="sc">^</span><span class="dv">2</span>)  <span class="co"># Calcul du MSE</span></span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a>  mse_df2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mse_df2, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">MSE =</span> mse_value2))</span>
<span id="cb203-7"><a href="#cb203-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb203-8"><a href="#cb203-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-9"><a href="#cb203-9" aria-hidden="true" tabindex="-1"></a>mse_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Model       MSE
1             AR1 23.193565
2             ARP 10.084083
3           ARIMA  9.929321
4     HOLT_WINTER  2.406585
5        ADAM_ETS  5.565397
6 ADAM_ETS_SARIMA  5.330766
7         SSARIMA  3.170275
8             CES 49.494445</code></pre>
</div>
</div>
</section>
<section id="dm-test-2" class="level3">
<h3 class="anchored" data-anchor-id="dm-test-2">DM test 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># DataFrame pour stocker les résultats du </span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>dm_results2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">character</span>(), <span class="at">DM_Statistic =</span> <span class="fu">numeric</span>(), <span class="at">P_Value =</span> <span class="fu">numeric</span>(), <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="co"># DM test pour chaque modèle comparé au modèle naïf</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (model <span class="cf">in</span> <span class="fu">setdiff</span>(models2, <span class="st">"NAIVE"</span>)) {</span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>  dm_test_result2 <span class="ot">&lt;-</span> <span class="fu">dm.test</span>(errors_df2<span class="sc">$</span>NAIVE, errors_df2[[model]], <span class="at">alternative =</span> <span class="st">"less"</span>)</span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  résultats</span></span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>dm_results2 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(dm_results2, <span class="fu">data.frame</span>(<span class="at">Model =</span> model, <span class="at">DM_Statistic =</span> dm_test_result2<span class="sc">$</span>statistic, <span class="at">P_Value =</span> dm_test_result2<span class="sc">$</span>p.value))}</span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a>dm_results2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              Model DM_Statistic      P_Value
DM              AR1    -1.716421 0.0570373979
DM1             ARP     4.390655 0.9994600888
DM2           ARIMA     4.259706 0.9993281653
DM3     HOLT_WINTER     3.396124 0.9970150632
DM4        ADAM_ETS     3.588031 0.9978708541
DM5 ADAM_ETS_SARIMA     3.561305 0.9977686888
DM6         SSARIMA     3.519984 0.9976007031
DM7             CES    -4.181538 0.0007662846</code></pre>
</div>
</div>
</section>
<section id="prévision-modele-holt-winter" class="level2">
<h2 class="anchored" data-anchor-id="prévision-modele-holt-winter">Prévision modele Holt Winter</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checkresiduals</span>(forecast_hw2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="prevision_conjoncture_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Ljung-Box test

data:  Residuals from HoltWinters
Q* = 23.15, df = 24, p-value = 0.511

Model df: 0.   Total lags used: 24</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>forecast_hw2<span class="sc">$</span>mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Jan      Feb      Mar      Apr      May      Jun      Jul      Aug
2023 126.8253 126.1869 125.5485 124.9101 124.2717 123.6333 122.9950 122.3566
          Sep      Oct      Nov      Dec
2023 121.7182 121.0798 120.4414 119.8030</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>df2<span class="sc">$</span>corrige</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 129.8342 128.5782 127.6490 125.7685 123.8522 122.4108 121.2518 122.5805
 [9] 122.9006 122.4146 121.4245 120.0314</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/isabel6198\.github\.io\/portfolio\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>